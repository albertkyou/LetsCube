{"version":3,"sources":["theme.js","store/rooms/actions.js","store/rooms/reducer.js","store/room/actions.js","store/room/reducer.js","store/socket/reducer.js","store/socket/actions.js","store/user/actions.js","store/user/reducer.js","store/messages/actions.js","store/messages/reducers.js","store/chat/actions.js","store/chat/reducer.js","store/socket/Socket.js","store/socket/middleware.js","store/index.js","components/Footer.js","lib/wca.js","components/Header.js","components/AddRoomDialog.js","components/ListItemLink.js","components/RoomListItem.js","components/RoomList.js","components/Room/Login.js","lib/stats.js","lib/utils.js","components/User.js","components/Room/TimesTable.js","components/Timer/styles.js","components/Timer/SpacebarTimer.js","components/Timer/ManualTimer.js","components/Timer/index.js","components/Scramble.js","components/Room/UserStats.js","components/Room/Main.js","components/Room/Chat.js","components/Room/AdminToolbar.js","components/Room/UserToolbar.js","components/Room/index.js","components/EditableTextField.js","components/Profile.js","components/Navigation.js","components/App.js","registerServiceWorker.js","index.js","lib/protocol.js"],"names":["createMuiTheme","palette","primary","main","secondary","red","A400","background","default","typography","fontSize","createRoom","options","type","INITIAL_STATE","rooms","reducers","state","action","fetching","room","filter","_id","map","i","roomsReducer","roomUpdated","fetchRoom","id","deleteRoom","joinRoom","password","submitResult","result","sendStatus","status","requestNewScramble","admin","changeEvent","event","updateCompeting","competing","name","accessCode","private","users","statuses","attempts","waitingFor","concat","user","undefined","attempt","new_scramble","results","userId","roomReducer","connected","loginFailed","error","socketReducer","userChanged","updateProfile","profile","wcaId","showWCAID","canJoinRoom","preferUsername","displayName","useInspection","avatar","thumb_url","userReducer","createMessage","message","closeMessage","index","messages","m","sendChat","receiveChat","u","findIndex","Error","stackTraceLimit","Infinity","Socket","props","connect","socket","io","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","timeout","autoConnect","on","Protocol","_onConnected","onDisconnected","onError","onReconnect","Object","keys","events","forEach","console","log","onConnected","disconnect","close","emit","onChange","this","socketMiddleware","store","isConnected","dispatch","isError","connectionChanged","getState","statusCode","push","severity","text","redirect","roomsUpdated","globalRoomUpdated","roomCreated","roomDeleted","updateAdmin","adminName","uuid","icon","roomJoined","userJoined","find","userLeft","newAttempt","scrambles","join","newResult","receiveStatus","updateCompetingForUser","payload","location","pathname","next","composeEnhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","history","createBrowserHistory","ReactGA","initialize","debug","rootReducer","combineReducers","router","connectRouter","roomList","messageReducer","chat","chatReducer","middlewares","routerMiddleware","thunkMiddleware","nextPage","search","page","pageview","middleware","applyMiddleware","createStore","Links","url","version","useStyles","makeStyles","theme","root","padding","spacing","grow","flexGrow","link","margin","verticalAlign","color","textDecoration","opacity","Footer","classes","Paper","square","Grid","container","className","justify","item","Link","key","variant","href","target","rel","Events","getNameFromId","eventId","e","display","flexDirection","height","title","minWidth","titleLink","content","roomTitleGrid","Header","children","loggedIn","React","useState","anchorEl","setAnchorEl","open","Boolean","AppBar","position","elevation","Toolbar","Typography","to","component","style","paddingLeft","ListItem","ListItemText","IconButton","onClick","currentTarget","Avatar","src","Menu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","onClose","MenuItem","document","origin","Button","defaultProps","roomName","fab","bottom","right","AddRoomDialog","onCreateRoom","setRoomName","isPrivate","setPrivate","setPassword","handleClose","Dialog","DialogTitle","DialogContent","paper","TextField","label","value","length","autoComplete","autoFocus","fullWidth","FormControlLabel","control","Switch","checked","disabled","DialogActions","ListItemLink","button","RoomListItem","userText","usersLength","ListItemIcon","alert","warning","contrastText","RoomList","createRoomDialogOpen","setCreateRoomDialogOpen","publicRooms","privateRooms","showAlert","Container","maxWidth","disableGutters","Alert","List","subheader","ListSubheader","Divider","borderRadius","Login","roomId","resetPassword","setResetPassword","login","preventDefault","helperText","width","justifyContent","onSubmit","sum","a","b","getTimeOrDNF","penalties","DNF","time","aoN","n","lastN","slice","sort","reduce","Math","max","min","mean","t","_attempts","stats","userAttempts","ao5","ao12","pad","fixed","d","Number","toFixed","formatTime","_options","inspection","AUF","s","auf","hours","floor","minutes","seconds","milli","formattedTime","formattedTimeWithPenalties","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","fn","setTimeout","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelRequestAnimationFrame","oCancelRequestAnimationFrame","msCancelRequestAnimationFrame","clearTimeout","setInterval","handle","interval","call","clearInterval","now","performance","bind","Date","popover","pointerEvents","p","paddingBottom","User","handlePopoverClose","aria-haspopup","onMouseEnter","onMouseLeave","Popover","disableRestoreFocus","username","overflowY","table","flexFlow","thead","boxShadow","shadows","tbody","tr","tableLayout","tableHeaderTime","tableResultCell","tableHeaderMean","TableStatusCell","TableCell","align","TableTimeCell","highlight","displayTime","TimesTable","tableBodyRef","createRef","current","scrollTop","sortedUsers","userA","userB","TableContainer","Table","stickyHeader","size","TableHead","TableRow","tableHeaderIndex","clsx","toString","TableBody","ref","reverse","r","best","textAlign","PRIMING","INSPECTING_PRIMING","INSPECTING","fullscreen","top","left","zIndex","tooltip","backgroundColor","transition","transitions","easing","easeInOut","withStyles","styles","STATUS","RESTING","TIMING","SUBMITTING_DOWN","SUBMITTING","STATUSES","Timer","rootRef","focused","started","_keyDown","keyDown","_keyUp","keyUp","_touchStart","touchStart","_touchEnd","touchEnd","addEventListener","timerObj","removeEventListener","onStatusChange","setState","tick","indexOf","onSubmitTime","inspectionDNF","finalTime","reset","setStatus","keyIsDown","keyCode","submitTime","split","inspecting","hideTime","penalty","adjustedTime","penaltyHalf","timerText","editingTime","FormGroup","row","Checkbox","flipPenality","Box","renderSubmitting","renderTiming","Component","initialStyles","alignItems","input","grey","inputProps","border","divider","penaltyBox","parseTime","inputTime","match","parseInt","decimalStr","decimal","denominator","centiSeconds","round","parseNumericalTime","ManualTimer","timers","spacebar","SpacebarTimer","manual","timeInput","setTimeInput","setDNF","setAUF","Input","disableUnderline","other","TimerComponent","scramble","fontFamily","minx","lineHeight","line","Megaminx","Scramble","marging","UserStats","waitingForBox","Main","timerFocused","timerType","setTimerType","latestAttempt","timerDisabled","calcStats","statues","Icons","USER","ADMIN","SCRAMBLE","Icon","paddingTop","systemMessage","marginTop","marginBottom","lastMessageForUser","selectable","Chat","onFocus","onDefocus","setMessage","listRef","useRef","useEffect","scrollHeight","ClickAwayListener","onClickAway","dense","findUser","displayAvatar","isNextMessageTheSameUser","ListItemAvatar","FormControl","placeholder","adminToolbar","minHeight","changeEventSelect","paddingRight","AdminToolbar","menuOpen","Select","UserToolbar","userCompeting","panels","breakpoints","up","bottomNav","bottomNavItem","hiddenOnMobile","down","panel","backdrop","drawer","toolbarContainer","RoomNav","inRoom","currentPanel","params","Backdrop","CircularProgress","isAdmin","direction","md","BottomNavigation","showLabels","v","handleChangePanel","BottomNavigationAction","EditableTextField","validate","editing","setEditing","_value","setValue","setError","startEditing","cancel","err","InputLabel","inputRef","focus","FormHelperText","ButtonGroup","marginLeft","marginRight","order","avatarContainer","preferences","separate","indent","Profile","handleToggle","fetch","headers","method","body","JSON","stringify","then","res","json","xs","lg","cb","ok","catch","preferRealName","backdropContainer","drawerHeader","mixins","toolbar","App","reason","Snackbar","exact","path","Room","autoHideDuration","noInitialPop","ThemeProvider","CssBaseline","Navigation","isLocalhost","hostname","registerValidSW","swUrl","config","Workbox","register","data","ReactDOM","render","querySelector","navigator","URL","process","response","contentType","get","serviceWorker","ready","registration","unregister","reload","checkValidServiceWorker","module","exports","MESSAGE","CONNECT","DISCONNECT","CONNECT_ERR","RECONNECT_ERR","RECONNECT","ERROR","UPDATE_ROOMS","UPDATE_ROOM","GLOBAL_ROOM_UPDATED","CREATE_ROOM","DELETE_ROOM","ROOM_CREATED","ROOM_DELETED","UPDATE_ADMIN","FORCE_JOIN","FETCH_ROOM","JOIN_ROOM","LEAVE_ROOM","JOIN","USER_JOIN","USER_LEFT","SUBMIT_RESULT","NEW_RESULT","NEW_ATTEMPT","REQUEST_SCRAMBLE","CHANGE_EVENT","UPDATE_PREFERENCES","UPDATE_STATUS","UPDATE_COMPETING"],"mappings":"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","file":"static/js/main.9a5912f4.chunk.js","sourcesContent":["import { red } from '@material-ui/core/colors';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nexport default createMuiTheme({\n  palette: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: red.A400,\n    },\n    background: {\n      default: '#fff',\n    },\n  },\n  typography: {\n    fontSize: 12,\n  },\n});\n","export const CREATE_ROOM = 'rooms/create';\nexport const ROOMS_UPDATED = 'rooms/updated';\nexport const ROOM_CREATED = 'rooms/created';\nexport const ROOM_DELETED = 'rooms/deleted';\nexport const ROOM_UPDATED = 'rooms/room_updated';\n\nexport const roomsUpdated = (rooms) => ({\n  type: ROOMS_UPDATED,\n  fetching: false,\n  rooms,\n});\n\nexport const roomCreated = (room) => ({\n  type: ROOM_CREATED,\n  room,\n});\n\nexport const roomUpdated = (room) => ({\n  type: ROOM_UPDATED,\n  room,\n});\n\nexport const roomDeleted = (room) => ({\n  type: ROOM_DELETED,\n  room,\n});\n\nexport const createRoom = (options) => ({\n  type: CREATE_ROOM,\n  options,\n});\n","import {\n  ROOMS_UPDATED,\n  ROOM_CREATED,\n  ROOM_DELETED,\n  ROOM_UPDATED,\n} from './actions';\n\nconst INITIAL_STATE = {\n  rooms: [],\n};\n\nconst reducers = {\n  [ROOMS_UPDATED]: (state, action) => ({\n    ...state,\n    fetching: false,\n    rooms: action.rooms,\n  }),\n  [ROOM_CREATED]: (state, action) => ({\n    ...state,\n    rooms: [...state.rooms, action.room],\n  }),\n  [ROOM_DELETED]: (state, action) => ({\n    ...state,\n    rooms: state.rooms.filter((room) => room._id !== action.room),\n  }),\n  [ROOM_UPDATED]: (state, action) => ({\n    rooms: state.rooms.map((i) => (i._id === action.room._id ? action.room : i)),\n  }),\n};\n\n// Socket reducer\nfunction roomsReducer(state = INITIAL_STATE, action) {\n  if (reducers[action.type]) {\n    return reducers[action.type](state, action);\n  }\n  return state;\n}\n\nexport default roomsReducer;\n","export const ROOM_UPDATED = 'room/updated';\nexport const DELETE_ROOM = 'room/delete';\nexport const FETCH_ROOM = 'room/fetch';\nexport const JOIN_ROOM = 'room/join';\nexport const LEAVE_ROOM = 'room/leave';\nexport const SUBMIT_RESULT = 'room/submit_result';\nexport const NEW_RESULT = 'room/new_result';\nexport const USER_JOIN = 'room/user_join';\nexport const USER_LEFT = 'room/user_left';\nexport const NEW_ATTEMPT = 'room/new_attempt';\nexport const UPDATE_ADMIN = 'room/update_admin';\nexport const REQUEST_SCRAMBLE = 'room/request_scramble';\nexport const CHANGE_EVENT = 'room/change_event';\nexport const SEND_STATUS = 'room/send_status';\nexport const RECEIVE_STATUS = 'room/receive_status';\nexport const UPDATE_COMPETING = 'room/update_competing';\nexport const UPDATE_COMPETING_FOR_USER = 'room/update_competing_for_user';\n\nexport const roomUpdated = (room) => ({\n  type: ROOM_UPDATED,\n  fetching: false,\n  room,\n});\n\nexport const fetchRoom = (id) => ({\n  type: FETCH_ROOM,\n  fetching: true,\n  id,\n});\n\nexport const deleteRoom = (id) => ({\n  type: DELETE_ROOM,\n  id,\n});\n\nexport const joinRoom = (id, password) => ({\n  type: JOIN_ROOM,\n  id,\n  password,\n});\n\n// We're submitting a new result\nexport const submitResult = (result) => ({\n  type: SUBMIT_RESULT,\n  result,\n});\n\n// A new result came in\nexport const newResult = (result) => ({\n  type: NEW_RESULT,\n  result,\n});\n\n// We got a new attempt (scramble)\nexport const newAttempt = (attempt, waitingFor) => ({\n  type: NEW_ATTEMPT,\n  attempt,\n  waitingFor,\n});\n\nexport const sendStatus = (status) => ({\n  type: SEND_STATUS,\n  status,\n});\n\nexport const receiveStatus = (user, status) => ({\n  type: RECEIVE_STATUS,\n  user,\n  status,\n});\n\nexport const leaveRoom = () => ({\n  type: LEAVE_ROOM,\n});\n\nexport const userJoined = (user) => ({\n  type: USER_JOIN,\n  user,\n});\n\nexport const userLeft = (user) => ({\n  type: USER_LEFT,\n  user,\n});\n\nexport const updateAdmin = (admin) => ({\n  type: UPDATE_ADMIN,\n  admin,\n});\n\nexport const requestNewScramble = (admin) => ({\n  type: REQUEST_SCRAMBLE,\n  admin,\n});\n\nexport const changeEvent = (event) => ({\n  type: CHANGE_EVENT,\n  event,\n});\n\nexport const updateCompeting = (competing) => ({\n  type: UPDATE_COMPETING,\n  competing,\n});\n\nexport const updateCompetingForUser = (userId, competing) => ({\n  type: UPDATE_COMPETING_FOR_USER,\n  userId,\n  competing,\n});\n","import {\n  ROOM_UPDATED,\n  FETCH_ROOM,\n  USER_JOIN,\n  USER_LEFT,\n  LEAVE_ROOM,\n  JOIN_ROOM,\n  NEW_ATTEMPT,\n  NEW_RESULT,\n  UPDATE_ADMIN,\n  RECEIVE_STATUS,\n  UPDATE_COMPETING_FOR_USER,\n} from './actions';\n\nconst INITIAL_STATE = {\n  fetching: null,\n  _id: null,\n  name: null,\n  event: null,\n  accessCode: null,\n  private: null,\n  password: null, // for reconnecting\n  users: [],\n  statuses: {},\n  attempts: [],\n  competing: {},\n  waitingFor: [],\n  admin: {\n    id: null,\n  },\n};\n\nconst reducers = {\n  [ROOM_UPDATED]: (state, action) => ({\n    ...state,\n    fetching: false,\n    ...action.room,\n  }),\n  [FETCH_ROOM]: (state, action) => ({\n    ...state,\n    fetching: action.fetching,\n  }),\n  [USER_JOIN]: (state, action) => ({\n    ...state,\n    users: state.users.concat(action.user),\n    competing: {\n      ...state.competing,\n      [action.user.id]: true,\n    },\n  }),\n  [USER_LEFT]: (state, action) => ({\n    ...state,\n    users: state.users.filter((user) => user.id !== action.user),\n  }),\n  [JOIN_ROOM]: (state, action) => ({ ...state, password: action.password }),\n  [LEAVE_ROOM]: (state) => ({\n    ...state,\n    name: undefined,\n    _id: undefined,\n    accessCode: undefined,\n    users: [],\n    statuses: {},\n    attempts: [],\n    competing: {},\n    waitingFor: [],\n    admin: {\n      id: null,\n    },\n  }),\n  [NEW_ATTEMPT]: (state, action) => ({\n    ...state,\n    attempts: state.attempts.concat(action.attempt),\n    waitingFor: action.waitingFor,\n    new_scramble: true,\n  }),\n  [NEW_RESULT]: (state, action) => ({\n    ...state,\n    attempts: state.attempts.map((attempt) => {\n      if (attempt.id === action.result.id) {\n        return {\n          ...attempt,\n          results: { ...attempt.results, [action.result.userId]: action.result.result },\n        };\n      }\n\n      return attempt;\n    }),\n    // remove user from waiting for for current attempt\n    waitingFor: state.waitingFor.filter((user) => user !== action.result.userId),\n  }),\n  [UPDATE_ADMIN]: (state, action) => ({ ...state, admin: action.admin }),\n  [RECEIVE_STATUS]: (state, action) => ({\n    ...state,\n    statuses: { ...state.statuses, [action.user]: action.status },\n  }),\n  [UPDATE_COMPETING_FOR_USER]: (state, action) => ({\n    ...state,\n    competing: {\n      ...state.competing,\n      [action.userId]: action.competing,\n    },\n    // remove user from waiting for for current attempt\n    waitingFor: action.competing\n      ? state.waitingFor\n      : state.waitingFor.filter((user) => user !== action.userId),\n  }),\n};\n\n// Socket reducer\nfunction roomReducer(state = INITIAL_STATE, action) {\n  if (reducers[action.type]) {\n    return reducers[action.type](state, action);\n  }\n  return state;\n}\n\nexport default roomReducer;\n","import {\n  CONNECTION_CHANGED,\n  SOCKET_JOIN_ROOM,\n  CONNECTED,\n  DISCONNECTED,\n  LOGIN_FAILED,\n} from './actions';\nimport { LEAVE_ROOM } from '../room/actions';\n\nconst INITIAL_STATE = {\n  connected: false,\n  room: null,\n  loginFailed: null,\n};\n\nconst reducers = {\n  [CONNECTED]: (state) => ({ ...state, connected: true }),\n  [DISCONNECTED]: (state) => ({ ...state, connected: false }),\n  [CONNECTION_CHANGED]: (state, action) => ({\n    ...state,\n    connected: action.connected,\n    error: false,\n  }),\n  [SOCKET_JOIN_ROOM]: (state, action) => ({ ...state, room: action.room }),\n  [LEAVE_ROOM]: (state) => ({ ...state, room: null }),\n  [LOGIN_FAILED]: (state, action) => ({ ...state, loginFailed: action.error }),\n};\n\nfunction socketReducer(state = INITIAL_STATE, action) {\n  if (reducers[action.type]) {\n    return reducers[action.type](state, action);\n  }\n  return state;\n}\n\nexport default socketReducer;\n","export const CONNECTION_CHANGED = 'socket/connection-changed';\nexport const CONNECT_SOCKET = 'socket/connect';\nexport const CONNECTED = 'socket/connected';\nexport const DISCONNECTED = 'socket/disconnected';\nexport const DISCONNECT_SOCKET = 'socket/disconnect';\nexport const SOCKET_JOIN_ROOM = 'socket/join_room';\nexport const LOGIN_FAILED = 'socket/login_failed';\n\n// The socket's connection state changed\nexport const connectionChanged = (isConnected) => ({\n  type: CONNECTION_CHANGED,\n  connected: isConnected,\n  isError: false,\n});\n\n// Main action to connect to socket\nexport const connectSocket = () => ({\n  type: CONNECT_SOCKET,\n});\n\nexport const disconnectSocket = () => ({\n  type: DISCONNECT_SOCKET,\n});\n\nexport const roomJoined = (room) => ({\n  type: SOCKET_JOIN_ROOM,\n  room,\n});\n\nexport const connected = () => ({\n  type: CONNECTED,\n  connected: true,\n});\n\nexport const disconnected = () => ({\n  type: DISCONNECTED,\n  connected: false,\n});\n\nexport const loginFailed = (error) => ({\n  type: LOGIN_FAILED,\n  error,\n});\n","export const USER_CHANGED = 'user/changed';\nexport const USER_FETCHING = 'user/fetching';\nexport const UPDATE_PROFILE = 'user/update_profile';\n\nexport const userChanged = (user) => ({\n  type: USER_CHANGED,\n  fetching: false,\n  user,\n});\n\nexport const fetchingUser = () => ({\n  type: USER_FETCHING,\n  fetching: true,\n});\n\n/* Update parts to a whole of a profile */\nexport const updateProfile = (profile) => ({\n  type: UPDATE_PROFILE,\n  profile,\n});\n\nexport const fetchUser = () => (dispatch) => {\n  dispatch(fetchingUser());\n  return fetch('/api/me')\n    .then((res) => {\n      if (!res.ok) {\n        throw new Error(res.statusCode);\n      }\n\n      return res.json();\n    })\n    .then((data) => dispatch(userChanged(data)))\n    .catch(() => {\n      dispatch(userChanged());\n    });\n};\n","import {\n  USER_CHANGED,\n  USER_FETCHING,\n  UPDATE_PROFILE,\n} from './actions';\n\nconst INITIAL_STATE = {\n  fetching: true,\n  id: undefined,\n  name: undefined,\n  wcaId: undefined,\n  showWCAID: undefined,\n  canJoinRoom: undefined,\n  preferUsername: undefined,\n  displayName: undefined,\n  useInspection: false,\n  avatar: {\n    thumb_url: undefined,\n  },\n};\n\nconst reducers = {\n  [USER_CHANGED]: (state, action) => ({\n    ...state,\n    fetching: false,\n    ...action.user,\n  }),\n  [USER_FETCHING]: (state) => ({ ...state, fetching: true }),\n  [UPDATE_PROFILE]: (state, action) => ({ ...state, ...action.profile }),\n};\n\n// User reducer\nfunction userReducer(state = INITIAL_STATE, action) {\n  if (reducers[action.type]) {\n    return reducers[action.type](state, action);\n  }\n  return state;\n}\n\nexport default userReducer;\n","export const NEW_MESSAGE = 'messages/new';\nexport const CLOSE_MESSAGE = 'messages/close';\n\nexport const createMessage = (message) => ({\n  type: NEW_MESSAGE,\n  message,\n});\n\nexport const closeMessage = (index) => ({\n  type: CLOSE_MESSAGE,\n  index,\n});\n","import {\n  NEW_MESSAGE,\n  CLOSE_MESSAGE,\n} from './actions';\n\nconst INITIAL_STATE = {\n  messages: [],\n};\n\nconst reducers = {\n  [NEW_MESSAGE]: (state, action) => ({\n    ...state,\n    messages: state.messages.concat([action.message]),\n  }),\n  [CLOSE_MESSAGE]: (state, action) => ({\n    ...state,\n    messages: state.messages.filter((m, i) => i !== action.index),\n  }),\n};\n\nfunction roomReducer(state = INITIAL_STATE, action) {\n  if (reducers[action.type]) {\n    return reducers[action.type](state, action);\n  }\n  return state;\n}\n\nexport default roomReducer;\n","export const SEND_CHAT = 'chat/send_chat';\nexport const RECEIVE_CHAT = 'chat/receive_chat';\n\nexport const sendChat = (message) => ({\n  type: SEND_CHAT,\n  message,\n});\n\nexport const receiveChat = (message) => ({\n  type: RECEIVE_CHAT,\n  message,\n});\n","import { RECEIVE_CHAT } from './actions';\nimport {\n  USER_JOIN,\n  ROOM_UPDATED,\n  LEAVE_ROOM,\n} from '../room/actions';\n\nconst INITIAL_STATE = {\n  messages: [],\n  users: [],\n};\n\nconst reducers = {\n  [RECEIVE_CHAT]: (state, action) => ({\n    ...state,\n    messages: state.messages.concat([action.message]),\n  }),\n  [ROOM_UPDATED]: (state, { room: { users = [] } }) => ({\n    ...state,\n    // update the list of users but don't add duplicates\n    users: users.concat(state.users\n      .filter((u) => users.findIndex((i) => i.id === u.id) > -1)),\n  }),\n  [LEAVE_ROOM]: () => ({\n    messages: [],\n    users: [],\n  }),\n  [USER_JOIN]: (state, action) => ({\n    ...state,\n    users: state.users.concat(action.user),\n  }),\n};\n\nfunction roomReducer(state = INITIAL_STATE, action) {\n  if (reducers[action.type]) {\n    return reducers[action.type](state, action);\n  }\n  return state;\n}\n\nexport default roomReducer;\n","import io from 'socket.io-client';\nimport * as Protocol from '../../lib/protocol';\n\nconst dev = process.env.NODE_ENV === 'development';\nconst makeURI = () => (dev ? `http://${document.location.hostname}:9000/` : '/');\n\nError.stackTraceLimit = Infinity;\n\n// Socket manager\nexport default class Socket {\n  constructor(props) {\n    if (props.onChange) this.onChange = props.onChange;\n    if (props.onError) this.onError = props.onError;\n    if (props.onConnected) this.onConnected = props.onConnected;\n    if (props.onDisconnected) this.onDisconnected = props.onDisconnected;\n    this.onReconnect = props.onReconnect;\n\n    this.events = props.events;\n    this.socket = null;\n  }\n\n  // attempt to connect to server\n  connect = () => {\n    // Connect\n    this.socket = io(makeURI(), {\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n      reconnectionDelayMax: 5000,\n      timeout: 20000,\n      autoConnect: true,\n      'force new connection': false,\n    });\n\n    // this.socket.connect();\n\n    this.socket.on(Protocol.CONNECT, this._onConnected);\n    this.socket.on(Protocol.DISCONNECT, this.onDisconnected);\n    this.socket.on(Protocol.CONNECT_ERR, this.onError);\n    this.socket.on(Protocol.RECONNECT_ERR, this.onError);\n    this.socket.on(Protocol.reconnect, this.onReconnect);\n\n    // Set listeners\n    Object.keys(this.events).forEach((event) => {\n      this.socket.on(event, this.events[event]);\n    });\n  };\n\n  // Received connect event from socket\n  _onConnected = () => {\n    // eslint-disable-next-line no-console\n    console.log('[SOCKET.IO]', Protocol.CONNECT);\n    if (this.onConnected) {\n      this.onConnected();\n    }\n  }\n\n  // Received disconnect event from socket\n  onDisconnected = () => {\n    // eslint-disable-next-line no-console\n    console.log('[SOCKET.IO]', Protocol.DISCONNECT);\n    if (this.onDisconnected) {\n      this.onDisconnected();\n    }\n  }\n\n  // Close the socket\n  disconnect = () => this.socket.close();\n\n  // Received error from socket\n  onError = (message) => {\n    // eslint-disable-next-line no-console\n    console.log('[SOCKET.IO]', 'error', message);\n  };\n\n  emit = (type, message) => {\n    this.socket.emit(type, message);\n  };\n}\n","import { push } from 'connected-react-router';\nimport { v4 as uuid } from 'uuid';\nimport * as Protocol from '../../lib/protocol';\nimport Socket from './Socket';\nimport {\n  CONNECT_SOCKET,\n  DISCONNECT_SOCKET,\n  connectionChanged,\n  roomJoined,\n  connected,\n  disconnected,\n  loginFailed,\n} from './actions';\nimport {\n  FETCH_ROOM,\n  DELETE_ROOM,\n  JOIN_ROOM,\n  LEAVE_ROOM,\n  SUBMIT_RESULT,\n  REQUEST_SCRAMBLE,\n  CHANGE_EVENT,\n  SEND_STATUS,\n  UPDATE_COMPETING,\n  joinRoom,\n  roomUpdated,\n  leaveRoom,\n  userJoined,\n  userLeft,\n  newAttempt,\n  newResult,\n  receiveStatus,\n  updateAdmin,\n  updateCompetingForUser,\n} from '../room/actions';\nimport {\n  CREATE_ROOM,\n  roomCreated,\n  roomUpdated as globalRoomUpdated,\n  roomDeleted,\n  roomsUpdated,\n} from '../rooms/actions';\nimport { createMessage } from '../messages/actions';\nimport { SEND_CHAT, receiveChat } from '../chat/actions';\n\nconst socketMiddleware = (store) => {\n  // The socket's connection state changed\n  const onChange = (isConnected) => {\n    store.dispatch(connectionChanged(isConnected));\n  };\n\n  const socket = new Socket({\n    onChange,\n    onConnected: () => {\n      store.dispatch(connected());\n    },\n    onDisconnected: () => {\n      store.dispatch(disconnected());\n    },\n    events: {\n      [Protocol.RECONNECT]: () => {\n        // eslint-disable-next-line no-console\n        console.log('[SOCKET.IO] reconnected!');\n        if (store.getState().room.accessCode) {\n          store.dispatch(joinRoom(store.getState().room._id, store.getState().room.password));\n        }\n      },\n      [Protocol.ERROR]: (error) => {\n        // eslint-disable-next-line no-console\n        console.log('[SOCKET.IO]', error);\n        if (error.statusCode === 404) {\n          store.dispatch(push('/'));\n        } else if (error.statusCode === 403 && error.event === Protocol.JOIN_ROOM) {\n          // Login failed attempt\n          store.dispatch(loginFailed({\n            error,\n          }));\n\n          store.dispatch(createMessage({\n            severity: 'error',\n            text: error.message,\n          }));\n        } else if (error.statusCode >= 400 && error.redirect) {\n          store.dispatch(push(error.redirect));\n        }\n      },\n      [Protocol.UPDATE_ROOMS]: (rooms) => {\n        store.dispatch(roomsUpdated(rooms));\n      },\n      [Protocol.UPDATE_ROOM]: (room) => {\n        store.dispatch(roomUpdated(room));\n      },\n      [Protocol.GLOBAL_ROOM_UPDATED]: (room) => {\n        store.dispatch(globalRoomUpdated(room));\n      },\n      [Protocol.ROOM_CREATED]: (room) => {\n        store.dispatch(roomCreated(room));\n      },\n      [Protocol.ROOM_DELETED]: (room) => {\n        store.dispatch(roomDeleted(room));\n        if (room === store.getState().room._id) {\n          store.dispatch(leaveRoom());\n          store.dispatch(push('/'));\n        }\n      },\n      [Protocol.UPDATE_ADMIN]: (admin) => {\n        store.dispatch(updateAdmin(admin));\n\n        const adminName = admin.id === store.getState().user.id ? 'You are' : `${admin.displayName} is`;\n        store.dispatch(receiveChat({\n          id: uuid(),\n          userId: -1,\n          text: `${adminName} in control now.`,\n          icon: 'ADMIN',\n        }));\n      },\n      [Protocol.FORCE_JOIN]: (room) => {\n        store.dispatch(push(`/rooms/${room._id}`));\n      },\n      [Protocol.JOIN]: (room) => {\n        store.dispatch(roomJoined(room.accessCode)); // update socket store\n        store.dispatch(roomUpdated(room));\n\n        store.dispatch(createMessage({\n          severity: 'success',\n          text: 'room joined',\n        }));\n      },\n      [Protocol.USER_JOIN]: (user) => {\n        store.dispatch(userJoined(user));\n\n        store.dispatch(receiveChat({\n          id: uuid(),\n          userId: -1,\n          text: `${user.displayName} Joined`,\n          icon: 'USER',\n        }));\n      },\n      [Protocol.USER_LEFT]: (user) => {\n        store.dispatch(receiveChat({\n          id: uuid(),\n          userId: -1,\n          text: `${store.getState().room.users.find((u) => u.id === user).displayName} Left`,\n          icon: 'USER',\n        }));\n\n        store.dispatch(userLeft(user));\n      },\n      [Protocol.NEW_ATTEMPT]: ({ attempt, waitingFor }) => {\n        store.dispatch(newAttempt(attempt, waitingFor));\n\n        store.dispatch(receiveChat({\n          id: uuid(),\n          userId: -1,\n          text: 'A new scramble is here',\n          secondary: attempt.scrambles.join(', '),\n          icon: 'SCRAMBLE',\n          event: store.getState().room.event,\n        }));\n      },\n      [Protocol.NEW_RESULT]: (result) => {\n        store.dispatch(newResult(result));\n      },\n      [Protocol.MESSAGE]: (message) => {\n        store.dispatch(receiveChat(message));\n      },\n      [Protocol.UPDATE_STATUS]: ({ user, status }) => {\n        store.dispatch(receiveStatus(user, status));\n      },\n      [Protocol.UPDATE_COMPETING]: ({ userId, competing }) => {\n        store.dispatch(updateCompetingForUser(userId, competing));\n\n        const displayName = userId === store.getState().user.id ? 'You are' : `${store.getState().room.users.find((user) => user.id === userId).displayName} is`;\n        store.dispatch(receiveChat({\n          id: uuid(),\n          userId: -1,\n          text: `${displayName} ${competing ? 'competing' : 'skipping'}`,\n          icon: 'USER',\n        }));\n      },\n    },\n  });\n\n  // catch attempt to join room here and then fetch socket event\n  const reducers = {\n    // no real point in this being here oper other places\n    '@@router/LOCATION_CHANGE': ({ payload }) => {\n      // TODO: improve\n      if (payload.location.pathname === '/' || payload.location.pathname === '/profile') {\n        store.dispatch(leaveRoom());\n      }\n    },\n    [CONNECT_SOCKET]: () => {\n      socket.connect();\n    },\n    [DISCONNECT_SOCKET]: () => {\n      socket.disconnect();\n    },\n    [FETCH_ROOM]: ({ id }) => {\n      socket.emit(Protocol.FETCH_ROOM, id);\n    },\n    [DELETE_ROOM]: ({ id }) => {\n      socket.emit(Protocol.DELETE_ROOM, id);\n    },\n    [JOIN_ROOM]: ({ id, password }) => {\n      socket.emit(Protocol.JOIN_ROOM, { id, password });\n    },\n    [CREATE_ROOM]: ({ options }) => {\n      socket.emit(Protocol.CREATE_ROOM, options);\n    },\n    [LEAVE_ROOM]: () => {\n      if (store.getState().room._id) {\n        socket.emit(Protocol.LEAVE_ROOM);\n      }\n    },\n    [SUBMIT_RESULT]: (event) => {\n      socket.emit(Protocol.SUBMIT_RESULT, event.result);\n    },\n    [REQUEST_SCRAMBLE]: (event) => {\n      socket.emit(Protocol.REQUEST_SCRAMBLE, event.result);\n    },\n    [CHANGE_EVENT]: ({ event }) => {\n      socket.emit(Protocol.CHANGE_EVENT, event);\n    },\n    [SEND_CHAT]: ({ message }) => {\n      socket.emit(Protocol.MESSAGE, message);\n    },\n    [SEND_STATUS]: ({ status }) => {\n      socket.emit(Protocol.UPDATE_STATUS, {\n        user: store.getState().user.id,\n        status,\n      });\n    },\n    [UPDATE_COMPETING]: ({ competing }) => {\n      socket.emit(Protocol.UPDATE_COMPETING, competing);\n    },\n  };\n\n  // Return the handler that will be called for each action dispatched\n  return (next) => (action) => {\n    if (reducers[action.type]) {\n      reducers[action.type](action);\n    }\n    next(action); // This is a middleware, we still need to call this!\n  };\n};\n\nexport default socketMiddleware;\n","import {\n  createStore, compose, combineReducers, applyMiddleware,\n} from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport ReactGA from 'react-ga';\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\nimport { createBrowserHistory } from 'history';\n\nimport roomsReducer from './rooms/reducer';\nimport roomReducer from './room/reducer';\nimport socketReducer from './socket/reducer';\nimport userReducer from './user/reducer';\nimport messageReducer from './messages/reducers';\nimport chatReducer from './chat/reducer';\n\nimport socketMiddleware from './socket/middleware';\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport const history = createBrowserHistory();\n\nif (process.env.NODE_ENV === 'production') {\n  ReactGA.initialize('UA-143761187-3', {\n    debug: false,\n  });\n}\n\nconst trackPage = (page) => {\n  ReactGA.pageview(page);\n};\n\nconst gaTrackingMiddleware = () => (next) => (action) => {\n  if (action.type === '@@router/LOCATION_CHANGE') {\n    const nextPage = `${action.payload.location.pathname}${action.payload.location.search}`;\n    trackPage(nextPage);\n  }\n  return next(action);\n};\n\n// Root reducer\nconst rootReducer = combineReducers({\n  router: connectRouter(history),\n  roomList: roomsReducer,\n  room: roomReducer,\n  socket: socketReducer,\n  user: userReducer,\n  messages: messageReducer,\n  chat: chatReducer,\n});\n\nconst middlewares = [\n  routerMiddleware(history),\n  thunkMiddleware,\n  socketMiddleware,\n];\n\nif (process.env.NODE_ENV === 'production') {\n  middlewares.push(gaTrackingMiddleware);\n}\n\nconst middleware = applyMiddleware(...middlewares);\n\n// Store\nexport const store = createStore(rootReducer, composeEnhancer(middleware));\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Link from '@material-ui/core/Link';\nimport { version } from '../../package.json';\n\nconst Links = [{\n  text: 'Contribute Idea',\n  url: 'https://docs.google.com/forms/d/1YgroYi7_VRj2VrTxNa2ytV099MaVV9rGbC8KVH0tdx0/edit#responses',\n}, {\n  text: 'Future',\n  url: 'https://github.com/coder13/LetsCube/wiki/Future',\n}, {\n  text: 'GitHub',\n  url: 'https://github.com/coder13/letscube',\n}, {\n  text: 'Contact',\n  url: 'mailto:choover11+letscube@gmail.com',\n}, {\n  text: `${version}`,\n  url: 'https://github.com/coder13/letscube',\n}];\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: theme.spacing(1),\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  link: {\n    fontSize: '1.125em',\n    margin: '.5em',\n    verticalAlign: 'middle',\n    color: '#7f7f7f',\n    '&:hover': {\n      textDecoration: 'none',\n      opacity: 0.75,\n    },\n  },\n}));\n\nfunction Footer() {\n  const classes = useStyles();\n\n  return (\n    <Paper square>\n      <Grid\n        container\n        className={classes.root}\n        justify=\"flex-end\"\n      >\n        <Grid item>\n          {Links.map((link) => (\n            <Link\n              key={link.text}\n              className={classes.link}\n              variant=\"body2\"\n              href={link.url}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {link.text}\n            </Link>\n          ))}\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n}\n\nexport default Footer;\n","export const Events = [{\n  id: '333',\n  name: '3x3',\n}, {\n  id: '222',\n  name: '2x2',\n}, {\n  id: '444',\n  name: '4x4',\n}, {\n  id: '555',\n  name: '5x5',\n}, {\n  id: '666',\n  name: '6x6',\n}, {\n  id: '777',\n  name: '7x7',\n// }, {\n//   id: '333bf',\n//   name: '3x3 Blindfolded',\n// }, {\n//   id: '333fm',\n//   name: '3x3x3 Fewest Moves',\n// }, {\n//   id: '333oh',\n//   name: '3x3 One-Handed',\n// }, {\n//   id: '333ft',\n//   name: '3x3 With Feet',\n}, {\n  id: 'minx',\n  name: 'Megaminx',\n}, {\n  id: 'pyram',\n  name: 'Pyraminx',\n}, {\n  id: 'clock',\n  name: 'Clock',\n}, {\n  id: 'skewb',\n  name: 'Skewb',\n}, {\n  id: 'sq1',\n  name: 'Square-1',\n// }, {\n//   id: '444bf',\n//   name: '4x4 Blindfolded',\n// }, {\n//   id: '555bf',\n//   name: '5x5 Blindfolded',\n// }, {\n//   id: '333mbf',\n//   name: '3x3x3 Multi-Blind',\n}];\n\nexport const getNameFromId = (eventId) => Events.find((e) => e.id === eventId).name;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport AppBar from '@material-ui/core/AppBar';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Avatar from '@material-ui/core/Avatar';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport Button from '@material-ui/core/Button';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Footer from './Footer';\nimport { getNameFromId } from '../lib/wca';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100vh',\n  },\n  title: {\n    flexGrow: 1,\n    minWidth: '6em',\n  },\n  titleLink: {\n    color: 'inherit',\n    textDecoration: 'none',\n  },\n  content: {\n    display: 'flex',\n    flexGrow: 1,\n    flexDirection: 'column',\n  },\n  roomTitleGrid: {\n    flexGrow: 1,\n  },\n}));\n\nfunction Header({ children, user, room }) {\n  const loggedIn = !!user.id;\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n\n  const handleMenu = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const login = () => {\n    window.location = `/auth/login?redirect=${document.location.href}`;\n  };\n\n  const logout = () => {\n    window.location = `/auth/logout?redirect=${document.location.origin}/`;\n  };\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"relative\" elevation={1}>\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n            <Link to=\"/\" className={classes.titleLink}>Let&apos;s Cube</Link>\n          </Typography>\n          {/* <IconButton color=\"inherit\" edge=\"start\" onClick={() => setDrawerOpen(true)}>\n            <MenuIcon/>\n          </IconButton> */}\n          <Grid className={classes.roomTitleGrid}>\n            { room._id && (\n              <>\n                <Typography variant=\"h6\" component=\"span\">\n                  <Link to={`/rooms/${room._id}`} className={classes.titleLink}>{room.name}</Link>\n                </Typography>\n                <Typography variant=\"subtitle2\" component=\"span\" style={{ paddingLeft: '1em' }}>\n                  {getNameFromId(room.event)}\n                </Typography>\n              </>\n            )}\n          </Grid>\n\n          { loggedIn\n            ? (\n              <div style={{ display: 'flex' }}>\n                <ListItem style={{ padding: '.5em' }}>\n                  <ListItemText\n                    primary={\n                      <Typography variant=\"h6\">{user.name}</Typography>\n                    }\n                    secondary={\n                      <Typography variant=\"caption\">{user.wcaId}</Typography>\n                    }\n                  />\n                </ListItem>\n                <IconButton onClick={handleMenu} color=\"inherit\">\n                  <Avatar src={user.avatar.thumb_url} />\n                </IconButton>\n                <Menu\n                  id=\"menu-appbar\"\n                  anchorEl={anchorEl}\n                  anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                  keepMounted\n                  transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                  open={open}\n                  onClose={handleClose}\n                >\n                  <MenuItem component={Link} to=\"/profile\" variant=\"contained\" color=\"primary\">Profile</MenuItem>\n                  <MenuItem onClick={logout}>Log out</MenuItem>\n                </Menu>\n              </div>\n            )\n            : <Button color=\"inherit\" onClick={login}>Login</Button>}\n        </Toolbar>\n      </AppBar>\n      <main className={classes.content}>\n        {children}\n      </main>\n      <Footer />\n    </div>\n  );\n}\n\nHeader.propTypes = {\n  user: PropTypes.shape({\n    id: PropTypes.number,\n    name: PropTypes.string,\n    wcaId: PropTypes.string,\n    avatar: PropTypes.shape({\n      thumb_url: PropTypes.string,\n    }),\n  }),\n  room: PropTypes.shape({\n    _id: PropTypes.string,\n    name: PropTypes.string,\n    event: PropTypes.string,\n  }),\n  children: PropTypes.element.isRequired,\n};\n\nHeader.defaultProps = {\n  user: {\n    id: undefined,\n    name: undefined,\n    wcaId: undefined,\n    avatar: {\n      thumb_url: undefined,\n    },\n  },\n  room: {\n    _id: undefined,\n    name: undefined,\n    event: undefined,\n  },\n};\n\nconst mapStateToProps = (state) => ({\n  roomName: state.room.name,\n});\n\nexport default connect(mapStateToProps)(Header);\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nconst useStyles = makeStyles((theme) => ({\n  fab: {\n    position: 'fixed',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n}));\n\nfunction AddRoomDialog({ open, onCreateRoom, onClose }) {\n  const classes = useStyles();\n  const [roomName, setRoomName] = useState('');\n  const [isPrivate, setPrivate] = useState(false);\n  const [password, setPassword] = useState('');\n\n  const handlePrivate = () => {\n    setPrivate(!isPrivate);\n  };\n\n  const handleRoomNameChange = (event) => {\n    if (event.target.value.length < 100) {\n      setRoomName(event.target.value);\n    }\n  };\n\n  const handlePasswordChange = (event) => {\n    setPassword(event.target.value);\n  };\n\n  const handleClose = () => {\n    setRoomName('');\n    setPrivate(false);\n    setPassword('');\n    onClose();\n  };\n\n  const handleSubmit = () => {\n    onCreateRoom({\n      name: roomName,\n      password,\n    });\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose}>\n      <DialogTitle>Create Room</DialogTitle>\n      <DialogContent className={classes.paper}>\n        <TextField\n          id=\"roomName\"\n          label=\"Room Name\"\n          onChange={handleRoomNameChange}\n          value={roomName}\n          autoComplete=\"off\"\n          autoFocus\n          fullWidth\n        />\n        <FormControlLabel\n          label=\"Private Room?\"\n          control={\n            <Switch checked={isPrivate} onChange={handlePrivate} />\n        }\n        />\n        <TextField\n          id=\"password\"\n          label=\"Password\"\n          type=\"password\"\n          disabled={!isPrivate}\n          onChange={handlePasswordChange}\n          autoFocus\n          fullWidth\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleSubmit} color=\"primary\" disabled={!roomName || (isPrivate && !password)}>Create</Button>\n        <Button onClick={handleClose} color=\"secondary\">Cancel</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nAddRoomDialog.propTypes = {\n  open: PropTypes.bool,\n  onCreateRoom: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nAddRoomDialog.defaultProps = {\n  open: false,\n};\n\nexport default AddRoomDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport ListItem from '@material-ui/core/ListItem';\n\nfunction ListItemLink({ children, to, disabled }) {\n  return (\n    <ListItem button component={Link} to={to} disabled={disabled}>{children}</ListItem>\n  );\n}\n\nListItemLink.propTypes = {\n  children: PropTypes.arrayOf(PropTypes.element).isRequired,\n  to: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n};\n\nListItemLink.defaultProps = {\n  disabled: false,\n};\n\nexport default ListItemLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport PublicIcon from '@material-ui/icons/Public';\nimport PrivateIcon from '@material-ui/icons/Lock';\nimport ListItemLink from './ListItemLink';\nimport { getNameFromId } from '../lib/wca';\n\nfunction RoomListItem({ room, disabled }) {\n  const userText = room.usersLength === 0 ? ' empty'\n    : ` ${room.usersLength} user${room.usersLength > 1 ? 's' : ''}${room.users ? `: ${room.users.join(', ')}` : ''}`;\n\n  return (\n    <ListItemLink\n      to={`/rooms/${room._id}`}\n      disabled={disabled}\n    >\n      <ListItemIcon>\n        { room.private\n          ? <PrivateIcon />\n          : <PublicIcon />}\n      </ListItemIcon>\n      <ListItemText\n        primary={(\n          <Typography variant=\"h6\">\n            {`${room.name} (${getNameFromId(room.event)})`}\n          </Typography>\n      )}\n        secondary={(\n          <Typography>\n            {userText}\n          </Typography>\n      )}\n      />\n    </ListItemLink>\n  );\n}\n\nRoomListItem.propTypes = {\n  room: PropTypes.shape({\n    _id: PropTypes.string,\n    name: PropTypes.string,\n    event: PropTypes.string,\n    private: PropTypes.bool,\n    usersLength: PropTypes.number,\n    users: PropTypes.array,\n  }),\n  disabled: PropTypes.bool,\n};\n\nRoomListItem.defaultProps = {\n  room: {\n    _id: undefined,\n    name: undefined,\n    event: undefined,\n    private: false,\n    usersLength: 0,\n    users: undefined,\n  },\n  disabled: true,\n};\n\nexport default RoomListItem;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Container from '@material-ui/core/Container';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Button from '@material-ui/core/Button';\nimport Alert from '@material-ui/lab/Alert';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport AddIcon from '@material-ui/icons/Add';\nimport AddRoomDialog from './AddRoomDialog';\nimport RoomListItem from './RoomListItem';\nimport { createRoom } from '../store/rooms/actions';\n\nconst useStyles = makeStyles((theme) => ({\n  alert: {\n    padding: '1em',\n    '& a': {\n      color: theme.palette.warning.contrastText,\n      textDecoration: 'none',\n    },\n  },\n  createRoom: {\n    padding: '1em',\n  },\n}));\n\nfunction RoomList({ dispatch, rooms, user }) {\n  const classes = useStyles();\n  const [createRoomDialogOpen, setCreateRoomDialogOpen] = React.useState(false);\n  const publicRooms = rooms.filter((room) => !room.private);\n  const privateRooms = rooms.filter((room) => !!room.private);\n  const showAlert = !!user.id && !user.canJoinRoom;\n\n  const onCreateRoom = (options) => {\n    dispatch(createRoom(options));\n  };\n\n  return (\n    <Container maxWidth=\"md\" disableGutters style={{ padding: '1em' }}>\n      { showAlert && (\n        <Alert\n          className={classes.alert}\n          severity=\"error\"\n          action={(\n            <Button component={Link} color=\"inherit\" variant=\"filled\" to=\"/profile\">\n              GO TO PROFILE\n            </Button>\n          )}\n        >\n          <Link to=\"/profile\">\n            Must update profile settings before joining a room.\n          </Link>\n        </Alert>\n      )}\n\n      <br />\n      {user.id && (\n        <>\n          <ListItem\n            button\n            className={classes.createRoom}\n            variant=\"contained\"\n            color=\"primary\"\n            component={Button}\n            onClick={() => setCreateRoomDialogOpen(true)}\n          >\n            <ListItemIcon>\n              <AddIcon />\n            </ListItemIcon>\n            Create Room\n          </ListItem>\n          <br />\n        </>\n      )}\n      <Paper>\n        <List subheader={<ListSubheader>Public Rooms</ListSubheader>}>\n          {publicRooms.map((room) => (\n            <RoomListItem key={room._id} room={room} disabled={showAlert} />\n          ))}\n        </List>\n        <Divider />\n        <List subheader={<ListSubheader>Private Rooms</ListSubheader>}>\n          {privateRooms.map((room) => (\n            <RoomListItem key={room._id} room={room} disabled={showAlert} />\n          ))}\n        </List>\n      </Paper>\n      <AddRoomDialog\n        open={createRoomDialogOpen}\n        onCreateRoom={onCreateRoom}\n        onClose={() => setCreateRoomDialogOpen(false)}\n      />\n    </Container>\n  );\n}\n\nRoomList.propTypes = {\n  rooms: PropTypes.arrayOf(PropTypes.shape()),\n  user: PropTypes.shape({\n    id: PropTypes.number,\n    canJoinRoom: PropTypes.bool,\n  }),\n  dispatch: PropTypes.func.isRequired,\n};\n\nRoomList.defaultProps = {\n  rooms: [],\n  user: {\n    id: undefined,\n    canJoinRoom: false,\n  },\n};\n\nconst mapStateToProps = (state) => ({\n  rooms: state.roomList.rooms,\n  user: state.user,\n});\n\nexport default connect(mapStateToProps)(RoomList);\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport {\n  joinRoom,\n} from '../../store/room/actions';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexGrow: 1,\n    flexDirection: 'column',\n    padding: theme.spacing(0),\n    borderRadius: 0,\n  },\n}));\n\nfunction Login({ dispatch, roomId, loginFailed }) {\n  const classes = useStyles();\n  const [password, setPassword] = useState('');\n  const [resetPassword, setResetPassword] = useState(false);\n\n  // Forgive me lord\n  if (loginFailed && password && !resetPassword) {\n    setPassword('');\n\n    setResetPassword(true);\n  }\n\n  const login = (event) => {\n    event.preventDefault();\n    setResetPassword(false);\n    dispatch(joinRoom(roomId, password));\n  };\n\n  const updatePassword = (event) => {\n    setPassword(event.target.value);\n  };\n\n  const helperText = (loginFailed && loginFailed.error)\n    ? loginFailed.error.message : 'Enter password to login';\n\n  return (\n    <Paper className={classes.root} elevation={1}>\n      <Paper\n        elevation={2}\n        style={{\n          padding: '1em',\n          width: '320px',\n          margin: 'auto',\n        }}\n      >\n        <form\n          style={{\n            display: 'flex',\n            justifyContent: 'center',\n          }}\n          onSubmit={login}\n        >\n          <TextField\n            label=\"Password\"\n            type=\"password\"\n            autoFocus\n            helperText={helperText}\n            error={!!loginFailed}\n            value={password}\n            onChange={updatePassword}\n          />\n          <Button\n            variant=\"contained\"\n            style={{ margin: '1em' }}\n            onClick={login}\n          >\n            Log in\n          </Button>\n        </form>\n      </Paper>\n    </Paper>\n  );\n}\n\nLogin.propTypes = {\n  roomId: PropTypes.string,\n  loginFailed: PropTypes.shape(),\n  dispatch: PropTypes.func.isRequired,\n};\n\nLogin.defaultProps = {\n  roomId: undefined,\n  loginFailed: null,\n};\n\nconst mapStateToProps = (state) => ({\n  roomId: state.room._id,\n  loginFailed: state.socket.loginFailed,\n});\n\nexport default connect(mapStateToProps)(Login);\n","const sum = (a, b) => a + b;\nconst average = (a) => (a.length ? a.reduce(sum) / a.length : undefined);\nconst getTimeOrDNF = (a) => (a && !(a.penalties && a.penalties.DNF) ? a.time : -1);\n\nexport const aoN = (n) => (attempts) => {\n  const lastN = attempts.slice(-n);\n\n  if (lastN.length < (n - 1)) {\n    return undefined;\n  }\n\n  lastN.sort();\n\n  // if we have 2 DNFs / invalid attempts\n  if (lastN[1] < 0) {\n    return -1;\n  }\n\n  if (lastN[0] < 0) {\n    return (lastN.slice(1).reduce(sum) - Math.max(...lastN)) / (n - 2);\n  }\n\n  return (lastN.reduce(sum) - Math.min(...lastN) - Math.max(...lastN)) / (n - 2);\n};\n\nexport const mean = (attempts) => average(attempts.filter((t) => t > 0));\n\n// Inputs attempts array and returns stats for every user.\nexport default function (_attempts, users) {\n  const attempts = _attempts.map((i) => i.results);\n\n  const stats = {};\n  users.forEach((user) => {\n    let userAttempts = attempts.map((attempt) => attempt[user.id]);\n\n    if (!userAttempts || userAttempts.length === 0) {\n      return;\n    }\n\n    const latestAttempt = userAttempts[userAttempts.length - 1];\n\n    // remove last attempt if it doesn't exist\n    userAttempts = latestAttempt ? userAttempts : userAttempts.slice(0, -1);\n\n    userAttempts = userAttempts.map(getTimeOrDNF);\n\n    stats[user.id] = {\n      mean: mean(userAttempts),\n      ao5: aoN(5)(userAttempts),\n      ao12: aoN(12)(userAttempts),\n    };\n  });\n\n  return stats;\n}\n","const pad = (n) => (n < 10 ? '0' : '') + n;\nconst fixed = (n, d) => Number(n).toFixed(d === undefined ? 2 : d);\n\n/*\n  time: number in terms of milliseconds\n  Options:\n    - milli:      number of decimals,\n*/\nexport const formatTime = (time, options) => {\n  const _options = { ...options };\n  const { inspection, AUF, DNF } = _options;\n\n  if (time === undefined || time === null || time < 0) {\n    return 'DNF';\n  }\n\n  let s = time / 1000;\n\n  if (_options.inspection) {\n    s += 2;\n  }\n\n  if (_options.auf) {\n    s += 2;\n  }\n\n  const hours = Math.floor(s / 3600);\n  s %= 3600;\n  const minutes = Math.floor(s / 60);\n  const seconds = _options.milli !== undefined\n    ? fixed(s % 60, _options.milli)\n    : fixed(s % 60, s > 600 ? 0 : 2);\n\n  const formattedTime = `${hours ? `${hours}:` : ''}${minutes ? `${hours ? pad(minutes) : minutes}:` : ''}${minutes ? pad(seconds) : seconds}`;\n  const formattedTimeWithPenalties = `${inspection ? '+' : ''}${formattedTime}${AUF ? '+' : ''}`;\n  return DNF ? `DNF(${formattedTimeWithPenalties})` : formattedTimeWithPenalties;\n};\n\n// Better refresh and cross compatability.\nconst requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame\n  || window.mozRequestAnimationFrame || window.oRequestAnimationFrame\n  || window.msRequestAnimationFrame\n  || ((fn) => window.setTimeout(fn, 1000 / 60));\n\nconst cancelAnimationFrame = window.cancelAnimationFrame || window.webkitCancelAnimationFrame\n  || window.mozCancelRequestAnimationFrame\n  || window.oCancelRequestAnimationFrame\n  || window.msCancelRequestAnimationFrame || window.clearTimeout;\n\nexport const setInterval = (fn) => {\n  // Have to use an object here to store a reference\n  // to the requestAnimationFrame ID.\n  const handle = {};\n\n  const interval = () => {\n    fn.call();\n    handle.value = requestAnimationFrame(interval);\n  };\n\n  handle.value = requestAnimationFrame(interval);\n  return handle;\n};\n\nexport const clearInterval = (interval) => {\n  if (interval) {\n    cancelAnimationFrame(interval.value);\n  }\n};\n\nexport const now = () => (window.performance && window.performance.now\n  ? window.performance.now.bind(window.performance)\n  : Date.now)();\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'inline',\n  },\n  name: {\n    padding: 0,\n  },\n  paper: {\n    padding: theme.spacing(1),\n  },\n  popover: {\n    pointerEvents: 'none',\n  },\n  p: {\n    paddingBottom: '.5em',\n  },\n}));\n\nfunction User({ user }) {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handlePopoverOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handlePopoverClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n\n  return (\n    <div className={classes.root}>\n      <Typography\n        className={classes.name}\n        aria-haspopup=\"true\"\n        onMouseEnter={handlePopoverOpen}\n        onMouseLeave={handlePopoverClose}\n        component=\"span\"\n      >\n        {user.displayName}\n      </Typography>\n      <Popover\n        id={`${user.displayName}-info`}\n        className={classes.popover}\n        classes={{\n          paper: classes.paper,\n        }}\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handlePopoverClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'center',\n        }}\n        disableRestoreFocus\n      >\n        {user.wcaId && (\n          <Typography className={classes.p} variant=\"body1\">\n            {`WCA ID: ${user.wcaId}`}\n          </Typography>\n        )}\n        {user.name && (\n          <Typography className={classes.p} variant=\"body1\">\n            {`Name: ${user.name}`}\n          </Typography>\n        )}\n        {user.username && (\n          <Typography className={classes.p} variant=\"body1\">\n            {`Username: ${user.username}`}\n          </Typography>\n        )}\n      </Popover>\n    </div>\n  );\n}\n\nUser.propTypes = {\n  user: PropTypes.shape({\n    displayName: PropTypes.string,\n    username: PropTypes.string,\n    wcaId: PropTypes.string,\n    name: PropTypes.string,\n    showWCAID: PropTypes.bool,\n  }).isRequired,\n};\n\nexport default User;\n","import React, { createRef } from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport { formatTime } from '../../lib/utils';\nimport User from '../User';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    display: 'flex',\n    overflowY: 'auto',\n  },\n  table: {\n    display: 'flex',\n    flexFlow: 'column',\n  },\n  thead: {\n    boxShadow: theme.shadows[1],\n  },\n  tbody: {\n    flexGrow: 1,\n    overflowY: 'auto',\n    height: '0px',\n  },\n  tr: {\n    display: 'table',\n    tableLayout: 'fixed',\n    width: '100%',\n  },\n  tableHeaderTime: {\n    paddingLeft: 0,\n  },\n  tableResultCell: {\n    paddingLeft: '2em',\n  },\n  tableHeaderMean: {\n    paddingLeft: 16,\n  },\n  disabled: {\n    color: '#7f7f7f',\n  },\n}));\n\n\nfunction TableStatusCell({ status }) {\n  const classes = useStyles();\n\n  return (\n    <TableCell className={classes.tableResultCell} align=\"left\">\n      <span>{status === 'RESTING' ? '' : status}</span>\n    </TableCell>\n  );\n}\n\nTableStatusCell.propTypes = {\n  status: PropTypes.string,\n};\n\nTableStatusCell.defaultProps = {\n  status: '',\n};\n\nfunction TableTimeCell({ attempt: { time, penalties }, highlight }) {\n  const classes = useStyles();\n\n  const displayTime = formatTime(time, penalties);\n\n  return (\n    <TableCell className={classes.tableResultCell} align=\"left\">\n      <span\n        style={{\n          color: highlight ? 'red' : 'black',\n        }}\n      >\n        {time === null ? '' : displayTime}\n      </span>\n    </TableCell>\n  );\n}\n\nTableTimeCell.propTypes = {\n  attempt: PropTypes.shape({\n    time: PropTypes.number,\n    penalties: PropTypes.shape(),\n  }),\n  highlight: PropTypes.bool,\n};\n\nTableTimeCell.defaultProps = {\n  attempt: {\n    time: null,\n    penalties: {},\n  },\n  highlight: false,\n};\n\nfunction TimesTable({\n  room: {\n    users, statuses, attempts, competing,\n  }, stats,\n}) {\n  const classes = useStyles();\n  const tableBodyRef = createRef();\n\n  if (tableBodyRef.current) {\n    // scrolls the times.\n    tableBodyRef.current.scrollTop = 0;\n  }\n\n  // Converts true/false to 1/0 and then sorts by looking at the difference between the 2 values\n  const sortedUsers = users.sort((userA, userB) => +competing[userB.id] - +competing[userA.id]);\n\n  return (\n    <TableContainer className={classes.root}>\n      <Table stickyHeader className={classes.table} size=\"small\">\n        <TableHead className={classes.thead}>\n          <TableRow className={classes.tr}>\n            <TableCell align=\"left\" className={classes.tableHeaderIndex}>#</TableCell>\n            {sortedUsers.map((u) => (\n              <TableCell\n                key={u.id}\n                align=\"left\"\n                className={clsx(classes.tableHeaderTime, {\n                  [classes.disabled]: !competing[u.id],\n                })}\n              >\n                <User user={u} />\n                <br />\n              </TableCell>\n            ))}\n          </TableRow>\n          <TableRow className={classes.tr}>\n            <TableCell align=\"left\">mean</TableCell>\n            {sortedUsers.map((u) => (\n              <TableCell\n                key={u.id}\n                align=\"left\"\n                className={clsx(classes.tableHeaderMean, {\n                  [classes.disabled]: !competing[u.id],\n                })}\n              >\n                <span>\n                  {stats[u.id] ? formatTime(stats[u.id].mean).toString() : ''}\n                </span>\n              </TableCell>\n            ))}\n          </TableRow>\n        </TableHead>\n\n        <TableBody className={classes.tbody} ref={tableBodyRef}>\n          {[...attempts].reverse().map((attempt, index) => {\n            const results = users\n              .map((u) => (attempt.results[u.id]\n                && (attempt.results[u.id].penalties\n                  && !attempt.results[u.id].penalties.DNF)\n                ? attempt.results[u.id].time : undefined))\n              .filter((r) => !!r && r > -1);\n            const best = Math.min(...results);\n\n            return (\n              <TableRow className={classes.tr} key={attempt.id}>\n                <TableCell align=\"left\">{attempts.length - index}</TableCell>\n                {sortedUsers.map((u) => (index === 0 && !attempt.results[u.id] ? (\n                  <TableStatusCell key={u.id} status={statuses[u.id]} />\n                ) : (\n                  <TableTimeCell\n                    key={u.id}\n                    attempt={attempt.results[u.id]}\n                    highlight={attempt.results[u.id] && attempt.results[u.id].time === best}\n                  />\n                )))}\n              </TableRow>\n            );\n          })}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n}\n\nTimesTable.propTypes = {\n  room: PropTypes.shape({\n    users: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number,\n    })),\n    statuses: PropTypes.shape(),\n    attempts: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number,\n    })),\n    competing: PropTypes.shape(),\n  }),\n  stats: PropTypes.shape(),\n};\n\nTimesTable.defaultProps = {\n  room: {\n    users: [],\n    statuses: {},\n    attempts: [],\n    competing: {},\n  },\n  stats: {},\n};\n\nexport default TimesTable;\n","export default (theme) => ({\n  root: {\n    display: 'flex',\n    width: '100%',\n    height: '9em',\n    flexGrow: 0,\n    textAlign: 'center',\n    flexDirection: 'column',\n    padding: 'auto',\n    justifyContent: 'center',\n  },\n  disabled: {\n    color: '#7f7f7f',\n  },\n  PRIMING: {\n    color: 'green',\n  },\n  INSPECTING_PRIMING: {\n    color: 'green',\n  },\n  INSPECTING: {\n    color: 'red',\n  },\n  fullscreen: {\n    position: 'fixed',\n    width: '100%',\n    height: '100%',\n    top: 0,\n    left: 0,\n    zIndex: theme.zIndex.tooltip + 1,\n    backgroundColor: 'white',\n    transition: `background-color .2s ${theme.transitions.easing.easeInOut}`,\n  },\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { withStyles } from '@material-ui/core/styles';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport {\n  formatTime, setInterval, clearInterval, now,\n} from '../../lib/utils';\nimport styles from './styles';\n\nconst useStyles = withStyles(styles);\n\n/*\n  Complicated beast.\n\n  Hold spacebar for X seconds before timer is priming. Holding spacebar makes it priming.\n  Based on different settings, needs to either start inspection, or start timer.\n  Once spacebar is pressed again (again, need to prime)\n\n\n  Status: Resting, priming, inspecting, inspecting-priming, timing, submitting\n\n  submitting: needs to display buttons to ask if it was a penalty.\n    - Comment?\n    - OK\n    - +2\n    - DNF\n    - REDO?\n*/\n\nconst STATUS = {\n  RESTING: 'RESTING',\n  PRIMING: 'PRIMING',\n  INSPECTING: 'INSPECTING',\n  INSPECTING_PRIMING: 'INSPECTING_PRIMING',\n  TIMING: 'TIMING',\n  SUBMITTING_DOWN: 'SUBMITTING_DOWN',\n  SUBMITTING: 'SUBMITTING',\n};\n\nconst STATUSES = [STATUS.RESTING, STATUS.INSPECTING, STATUS.TIMING, STATUS.SUBMITTING];\n\nclass Timer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.rootRef = React.createRef();\n\n    this.state = {\n      focused: true,\n      started: undefined,\n      status: STATUS.RESTING,\n      time: 0,\n      penalties: {\n        /* inspection: false, */\n        /* inspectionDNF: false, */\n        /* DNF: false, */\n        /* AUF: false, */\n      },\n    };\n\n    this._keyDown = this.keyDown.bind(this);\n    this._keyUp = this.keyUp.bind(this);\n    this._touchStart = this.touchStart.bind(this);\n    this._touchEnd = this.touchEnd.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener('keydown', this._keyDown, false);\n    window.addEventListener('keyup', this._keyUp, false);\n\n    if (this.rootRef.current) {\n      this.rootRef.current.addEventListener('touchstart', this._touchStart);\n      this.rootRef.current.addEventListener('touchend', this._touchEnd);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.timerObj) {\n      clearInterval(this.timerObj);\n    }\n\n    window.removeEventListener('keydown', this._keyDown, false);\n    window.removeEventListener('keyup', this._keyUp, false);\n\n    if (this.rootRef.current) {\n      this.rootRef.current.removeEventListener('touchstart', this._touchStart, false);\n      this.rootRef.current.removeEventListener('touchend', this._touchEnd, false);\n    }\n  }\n\n  setStatus(status) {\n    const { onStatusChange } = this.props;\n    this.setState({ status });\n\n    switch (status) {\n      case STATUS.INSPECTING:\n        this.setState({\n          started: now(),\n          time: 0,\n        });\n        if (this.timerObj) {\n          clearInterval(this.timerObj);\n        }\n        this.timerObj = setInterval(this.tick.bind(this), 1000);\n        break;\n      case STATUS.TIMING:\n        this.setState({\n          started: now(),\n          time: 0,\n        });\n        if (this.timerObj) {\n          clearInterval(this.timerObj);\n        }\n        this.timerObj = setInterval(this.tick.bind(this), 10);\n        break;\n      case STATUS.SUBMITTING_DOWN:\n        clearInterval(this.timerObj);\n        break;\n      default:\n        break;\n    }\n\n    if (STATUSES.indexOf(status) > -1) {\n      onStatusChange(status);\n    }\n  }\n\n  submitTime() {\n    const { onSubmitTime } = this.props;\n    const { penalties } = this.state;\n\n    if (onSubmitTime) {\n      onSubmitTime({\n        time: penalties.inspectionDNF ? -1 : this.finalTime(),\n        penalties: {\n          DNF: penalties.DNF || penalties.inspectionDNF,\n          inspection: penalties.inspection,\n          AUF: penalties.AUF,\n        },\n      });\n    }\n    this.reset();\n  }\n\n  reset() {\n    this.setState({\n      started: 0,\n      penalties: {},\n    });\n    this.setStatus(STATUS.RESTING);\n  }\n\n  keyDown(event) {\n    const { disabled } = this.props;\n    const { focused, status } = this.state;\n\n    if (!focused || this.keyIsDown || disabled) {\n      return;\n    }\n\n    if (event.keyCode === 192 && status === STATUS.INSPECTING) { // escape\n      clearInterval(this.timerObj);\n      this.reset();\n    }\n\n    if (event.keyCode === 32) { // space\n      event.preventDefault();\n      switch (status) {\n        case STATUS.RESTING:\n          this.setStatus(STATUS.PRIMING);\n          break;\n        case STATUS.INSPECTING:\n          this.setStatus(STATUS.INSPECTING_PRIMING);\n          break;\n        default:\n          break;\n      }\n    }\n\n    if (status === STATUS.TIMING) {\n      this.setStatus(STATUS.SUBMITTING_DOWN);\n    }\n\n    this.keyIsDown = true;\n  }\n\n  keyUp(event) {\n    const { useInspection } = this.props;\n    const { focused, status } = this.state;\n\n    this.keyIsDown = false;\n    if (!focused) {\n      return;\n    }\n\n    // Keydown and keyup for enter\n    if (event.keyCode === 13 && status === STATUS.SUBMITTING) {\n      event.preventDefault();\n      this.submitTime();\n    }\n\n    if (event.keyCode === 32) {\n      event.preventDefault();\n      switch (status) {\n        case STATUS.PRIMING:\n          this.setStatus(useInspection ? STATUS.INSPECTING : STATUS.TIMING);\n          break;\n        case STATUS.INSPECTING_PRIMING:\n          this.setStatus(STATUS.TIMING);\n          break;\n        default:\n          break;\n      }\n    }\n\n    if (status === STATUS.SUBMITTING_DOWN) {\n      this.setStatus(STATUS.SUBMITTING);\n    }\n  }\n\n  touchStart(e) {\n    const { focused, disabled } = this.props;\n    const { status } = this.state;\n\n    if (!focused || this.keyIsDown || disabled) {\n      return;\n    }\n\n    switch (status) {\n      case STATUS.TIMING:\n        this.setStatus(STATUS.SUBMITTING_DOWN);\n        break;\n      case STATUS.RESTING:\n        e.preventDefault();\n        this.setStatus(STATUS.PRIMING);\n        break;\n      case STATUS.INSPECTING:\n        this.setStatus(STATUS.INSPECTING_PRIMING);\n        break;\n      default:\n        break;\n    }\n\n    this.keyIsDown = true;\n  }\n\n  touchEnd(e) {\n    const { useInspection } = this.props;\n    const { status } = this.state;\n    this.keyIsDown = false;\n\n    if (status === STATUS.SUBMITTING_DOWN) {\n      e.preventDefault();\n    }\n\n    switch (status) {\n      case STATUS.SUBMITTING_DOWN:\n        this.setStatus(STATUS.SUBMITTING);\n        break;\n      case STATUS.PRIMING:\n        this.setStatus(useInspection ? STATUS.INSPECTING : STATUS.TIMING);\n        break;\n      case STATUS.INSPECTING_PRIMING:\n        this.setStatus(STATUS.TIMING);\n        break;\n      default:\n        break;\n    }\n  }\n\n  inspecting() {\n    const { status } = this.state;\n    return status.split('_')[0] === STATUS.INSPECTING;\n  }\n\n  tick() {\n    const {\n      status, time, started, penalties,\n    } = this.state;\n\n    if (this.inspecting()) {\n      if (time < -2000) {\n        // DNF + Inspection == ran out of time, just submit pure DNF\n        penalties.inspectionDNF = true;\n        // TODO: figure out why I need this hack.\n        // The interval did not want to clear inside the tick function\n        // So delay it by 1 millisecond to get it to work.\n        // hopefully this doesn't break anything.\n        setTimeout(() => {\n          clearInterval(this.timerObj);\n        }, 1);\n        this.setStatus(STATUS.SUBMITTING);\n      } else if (time < 0) {\n        penalties.inspection = true;\n      }\n\n      this.setState({\n        time: 15 * 1000 - (now() - started),\n      });\n    } else if (status === STATUS.TIMING) {\n      this.setState({\n        time: now() - started,\n      });\n    }\n  }\n\n  timerText() {\n    const { hideTime } = this.props;\n    const { time, status } = this.state;\n\n    if (hideTime && status === STATUS.TIMING) {\n      return 'Solving...';\n    }\n\n    if (time < 0 && this.inspecting()) {\n      return '+2';\n    }\n\n    return formatTime(time, {\n      milli: this.inspecting() ? 0 : 2,\n    });\n  }\n\n  statusText() {\n    const { disabled } = this.props;\n    const { status } = this.state;\n\n    if (disabled) {\n      return 'disabled';\n    }\n\n    if (status === 'SUBMITTING') {\n      return 'Press Enter to Submit';\n    }\n\n    return status;\n  }\n\n  flipPenality(penalty) {\n    const { penalties } = this.state;\n    this.setState({\n      penalties: {\n        ...penalties,\n        [penalty]: !penalties[penalty],\n      },\n    });\n  }\n\n  finalTime() {\n    const { time, penalties } = this.state;\n\n    let adjustedTime = time;\n\n    if (penalties.inspection) {\n      adjustedTime += 2000;\n    }\n\n    if (penalties.AUF) {\n      adjustedTime += 2000;\n    }\n\n    return adjustedTime;\n  }\n\n  renderSubmitting() {\n    const { penalties } = this.state;\n    const { inspection, inspectionDNF, AUF } = penalties;\n    const DNF = penalties.DNF || inspectionDNF;\n\n    const penaltyHalf = `${inspection ? '2 +' : ''}${this.timerText()}${AUF ? ' + 2' : ''} = `;\n    const finalTimeHalf = formatTime(this.finalTime(), penalties);\n    const editingTime = ((AUF || inspection || DNF) ? penaltyHalf : '') + finalTimeHalf;\n\n    return (\n      <div>\n        <Typography\n          variant=\"h4\"\n        >\n          { inspectionDNF ? 'DNF' : editingTime}\n        </Typography>\n        <FormGroup\n          row\n          style={{\n            justifyContent: 'center',\n          }}\n        >\n          <FormControlLabel\n            control={<Checkbox size=\"medium\" variant=\"outlined\">AUF</Checkbox>}\n            label=\"AUF\"\n            value={AUF}\n            onChange={() => this.flipPenality('AUF')}\n          />\n          <FormControlLabel\n            control={<Checkbox size=\"medium\" variant=\"outlined\">DNF</Checkbox>}\n            label=\"DNF\"\n            value={DNF}\n            onChange={() => this.flipPenality('DNF')}\n          />\n          <Button variant=\"outlined\" onClick={() => this.submitTime()}>SUBMIT</Button>\n          <Button variant=\"outlined\" onClick={() => this.reset()}>REDO</Button>\n        </FormGroup>\n        <Typography\n          variant=\"subtitle1\"\n        >\n          Or press Enter to submit time\n        </Typography>\n      </div>\n    );\n  }\n\n  renderTiming() {\n    const { classes, disabled } = this.props;\n    const { focused, status } = this.state;\n\n    return (\n      <>\n        <Typography\n          variant=\"h1\"\n          className={clsx({\n            [classes.disabled]: disabled || !focused,\n          }, classes[status])}\n        >\n          {this.timerText()}\n        </Typography>\n        {process.env.NODE_ENV === 'development' ? disabled : ''}\n        {process.env.NODE_ENV === 'development' ? status : ''}\n      </>\n    );\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { status } = this.state;\n\n    return (\n      <Box\n        className={clsx(classes.root, {\n          [classes.fullscreen]: status !== STATUS.RESTING,\n        })}\n        ref={this.rootRef}\n      >\n        {status === STATUS.SUBMITTING ? this.renderSubmitting() : this.renderTiming()}\n      </Box>\n    );\n  }\n}\n\nTimer.propTypes = {\n  disabled: PropTypes.bool,\n  focused: PropTypes.bool,\n  onSubmitTime: PropTypes.func.isRequired,\n  useInspection: PropTypes.bool.isRequired,\n  hideTime: PropTypes.bool,\n  classes: PropTypes.shape().isRequired,\n  onStatusChange: PropTypes.func,\n};\n\nTimer.defaultProps = {\n  disabled: false,\n  focused: true,\n  hideTime: false,\n  onStatusChange: () => {},\n};\n\nexport default useStyles(Timer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Box from '@material-ui/core/Box';\nimport Input from '@material-ui/core/Input';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Button from '@material-ui/core/Button';\nimport initialStyles from './styles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    ...initialStyles(theme).root,\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  input: {\n    maxWidth: '300px',\n    margin: 'auto',\n    fontSize: '3em',\n    backgroundColor: theme.palette.grey[300],\n  },\n  inputProps: {\n    textAlign: 'center',\n    '&:focus': {\n      backgroundColor: theme.palette.grey[400],\n      border: `1px solid ${theme.palette.divider}`,\n      borderRadius: theme.borderRadius,\n    },\n  },\n  penaltyBox: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n}));\n\nfunction parseNumericalTime(time) {\n  const seconds = time % 10000;\n  const minutes = ((time - seconds) / 10000) % 100;\n  const hours = Math.floor((time - seconds) / 10000 / 100);\n  return (seconds + minutes * 6000 + hours * 360000) * 10;\n}\n\nfunction parseTime(inputTime) {\n  const match = inputTime.match(/^(?:(\\d*):)??(?:(\\d*):)?(\\d+)?(?:[.,](\\d*))?$/);\n  const hours = parseInt(match[1] || '0', 10);\n  const minutes = parseInt(match[2] || '0', 10);\n  const seconds = parseInt(match[3] || '0', 10);\n  const decimalStr = match[4] || '';\n  const decimal = parseInt(decimalStr || '0', 10);\n  const denominator = 10 ** (decimalStr.length - 2);\n  const centiSeconds = !decimal ? 0 : Math.round(decimal / denominator);\n\n  if (!hours && !minutes && !centiSeconds) {\n    return parseNumericalTime(parseInt(match[3] || '0', 10));\n  }\n\n  return (((((hours * 60) + minutes * 60) + seconds) * 100) + centiSeconds) * 10;\n}\n\nfunction ManualTimer({ disabled, onSubmitTime }) {\n  const classes = useStyles();\n  const [timeInput, setTimeInput] = React.useState('');\n  const [DNF, setDNF] = React.useState(false);\n  const [AUF, setAUF] = React.useState(false);\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    const time = parseTime(timeInput);\n    if (time) {\n      onSubmitTime({\n        time,\n        penalties: {\n          DNF,\n          AUF,\n        },\n      });\n      setAUF(false);\n      setDNF(false);\n      setTimeInput('');\n    }\n  };\n\n  return (\n    <Box className={classes.root}>\n      <form onSubmit={onSubmit}>\n        <Input\n          className={classes.input}\n          component=\"textarea\"\n          inputProps={{\n            className: classes.inputProps,\n          }}\n          disabled={disabled}\n          value={timeInput}\n          onChange={(e) => setTimeInput(e.target.value)}\n          disableUnderline\n          fullWidth\n        />\n      </form>\n      <div className={classes.penaltyBox}>\n        <FormControlLabel\n          control={(\n            <Checkbox\n              size=\"medium\"\n              variant=\"outlined\"\n              checked={AUF}\n              onChange={() => setAUF(!AUF)}\n            />\n          )}\n          label=\"AUF\"\n        />\n        <FormControlLabel\n          control={(\n            <Checkbox\n              size=\"medium\"\n              variant=\"outlined\"\n              checked={DNF}\n              onChange={() => setDNF(!DNF)}\n            />\n          )}\n          label=\"DNF\"\n        />\n        <Button variant=\"outlined\" onClick={onSubmit}>SUBMIT</Button>\n      </div>\n    </Box>\n  );\n}\n\nManualTimer.propTypes = {\n  disabled: PropTypes.bool.isRequired,\n  onSubmitTime: PropTypes.func.isRequired,\n};\n\nexport default ManualTimer;\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport SpacebarTimer from './SpacebarTimer';\nimport ManualTimer from './ManualTimer';\n\nconst timers = {\n  spacebar: SpacebarTimer,\n  manual: ManualTimer,\n};\n\nfunction Timer({\n  type, disabled, focused, onSubmitTime, ...other\n}) {\n  const TimerComponent = timers[type];\n\n  return (\n    <TimerComponent\n      disabled={disabled}\n      focused={focused}\n      onSubmitTime={onSubmitTime}\n      {...other}\n    />\n  );\n}\n\nTimer.propTypes = {\n  type: PropTypes.oneOf(['spacebar', 'manual']),\n  disabled: PropTypes.bool,\n  focused: PropTypes.bool,\n  onSubmitTime: PropTypes.func.isRequired,\n  onStatusChange: PropTypes.func,\n};\n\nTimer.defaultProps = {\n  type: 'spacebar',\n  disabled: false,\n  focused: true,\n  onStatusChange: () => {},\n};\n\nexport default Timer;\n","import React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    margin: '.5em',\n    textAlign: 'center',\n    '-webkit-user-select': 'text',\n    '-webkit-touch-callout': 'text',\n    '-moz-user-select': 'text',\n    '-ms-user-select': 'text',\n    'user-select': 'text',\n  },\n  scramble: {\n    fontFamily: 'Roboto Mono, monospace',\n    fontSize: '1.25em',\n  },\n  disabled: {\n    color: '#7f7f7f',\n  },\n  // eslint-disable-next-line quote-props\n  minx: {\n    lineHeight: '1.25em',\n    fontSize: '1.25em',\n  },\n  line: {\n    display: 'block',\n  },\n}));\n\nfunction Megaminx({ scramble }) {\n  const classes = useStyles();\n\n  return scramble.split('\\n').map((line, index) => (\n    <span key={index.toString()} className={classes.line}>\n      {line}\n      {line.length === 41 ? <>&nbsp;</> : ''}\n    </span>\n  ));\n}\n\nfunction Scramble({ event, scrambles, disabled }) {\n  const classes = useStyles();\n\n  return (\n    <div className={clsx(classes.root, {\n      [classes.disabled]: disabled,\n    })}\n    >\n      <Typography\n        variant=\"subtitle2\"\n        className={clsx({\n          [classes[event]]: true,\n        }, classes.scramble)}\n      >\n        {scrambles.length ? scrambles.map((scramble) => (event === 'minx' ? <Megaminx scramble={scramble} /> : scramble)) : 'No Scrambles'}\n      </Typography>\n    </div>\n  );\n}\n\nScramble.propTypes = {\n  event: PropTypes.string,\n  scrambles: PropTypes.arrayOf(PropTypes.string),\n  disabled: PropTypes.bool,\n};\n\nScramble.defaultProps = {\n  event: '333',\n  scrambles: [],\n  disabled: false,\n};\n\nexport default Scramble;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport { formatTime } from '../../lib/utils';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    padding: 0,\n    marging: 0,\n  },\n}));\n\nfunction UserStats({ stats }) {\n  const classes = useStyles();\n  const keys = Object.keys(stats).filter((key) => !!stats[key]);\n\n  if (!keys || keys.length === 0) {\n    return '';\n  }\n\n  return (\n    <Paper\n      className={classes.root}\n      square\n      elevation={4}\n    >\n      <Table\n        size=\"small\"\n      >\n        <TableHead>\n          <TableRow>\n            {keys.map((key) => (\n              <TableCell key={key}>{key}</TableCell>\n            ))}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          <TableRow>\n            {keys.map((key) => (\n              <TableCell key={key}>{formatTime(stats[key])}</TableCell>\n            ))}\n          </TableRow>\n        </TableBody>\n      </Table>\n    </Paper>\n  );\n}\n\nUserStats.propTypes = {\n  stats: PropTypes.shape(),\n};\n\nUserStats.defaultProps = {\n  stats: {},\n};\n\nexport default UserStats;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux';\nimport Paper from '@material-ui/core/Paper';\nimport Divider from '@material-ui/core/Divider';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport calcStats from '../../lib/stats';\nimport {\n  submitResult,\n  sendStatus,\n} from '../../store/room/actions';\nimport TimesTable from './TimesTable';\nimport Timer from '../Timer/index';\nimport Scramble from '../Scramble';\nimport UserStats from './UserStats';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexGrow: 1,\n    flexDirection: 'column',\n    padding: theme.spacing(0),\n    borderRadius: 0,\n    height: '100%',\n  },\n  waitingForBox: {\n    padding: '.5em',\n  },\n}));\n\nfunction Main({\n  dispatch, room, user, timerFocused,\n}) {\n  const classes = useStyles();\n  const [timerType, setTimerType] = React.useState('spacebar');\n\n  const onSubmitTime = (event) => {\n    if (!room.attempts.length) {\n      return;\n    }\n\n    // Don't even bother sending the result.\n    if (!user.id) {\n      return;\n    }\n\n    const latestAttempt = room.attempts ? room.attempts[room.attempts.length - 1] : {};\n    dispatch(submitResult({\n      id: latestAttempt.id,\n      result: {\n        time: event.time,\n        penalties: event.penalties,\n      },\n    }));\n  };\n\n  const handleStatusChange = (status) => {\n    dispatch(sendStatus(status));\n  };\n\n  const toggleTimerType = () => {\n    setTimerType(timerType === 'spacebar' ? 'manual' : 'spacebar');\n  };\n\n  const {\n    users, attempts, waitingFor,\n  } = room;\n  const latestAttempt = (attempts && attempts.length) ? attempts[attempts.length - 1] : {};\n  const timerDisabled = !timerFocused || !room.competing[user.id]\n    || room.waitingFor.indexOf(user.id) === -1;\n\n  const stats = calcStats(attempts, users);\n\n  return (\n    <Paper className={classes.root} variant=\"outlined\" square>\n      <Scramble\n        event={room.event}\n        disabled={timerDisabled}\n        scrambles={latestAttempt.scrambles}\n      />\n      <Divider />\n      <div style={{\n        display: 'flex',\n        flexDirection: 'row',\n      }}\n      >\n        <Button\n          style={{\n            fontSize: '.75em',\n            padding: 0,\n          }}\n          onClick={toggleTimerType}\n        >\n          Switch to\n          {' '}\n          {timerType === 'spacebar' ? 'manual' : 'spacebar'}\n        </Button>\n        <Timer\n          disabled={timerDisabled}\n          onSubmitTime={(e) => onSubmitTime(e)}\n          onStatusChange={handleStatusChange}\n          useInspection={user.useInspection}\n          type={timerType}\n        />\n      </div>\n      <Divider />\n      <TimesTable room={room} stats={stats} />\n      <UserStats stats={stats[user.id]} />\n      <Paper\n        className={classes.waitingForBox}\n        square\n      >\n        <Typography variant=\"body2\">\n          Waiting For:\n          {' '}\n          {waitingFor.map((userId) => users.find((u) => u.id === userId)).filter((u) => !!u).map((u) => u.displayName).join(', ')}\n        </Typography>\n      </Paper>\n    </Paper>\n  );\n}\n\nMain.propTypes = {\n  room: PropTypes.shape({\n    _id: PropTypes.string,\n    private: PropTypes.bool,\n    accessCode: PropTypes.string,\n    event: PropTypes.string,\n    users: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number,\n    })),\n    competing: PropTypes.shape(),\n    waitingFor: PropTypes.array,\n    statuses: PropTypes.shape(),\n    attempts: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number,\n    })),\n    admin: PropTypes.shape({\n      id: PropTypes.number,\n    }),\n  }),\n  user: PropTypes.shape({\n    id: PropTypes.number,\n    useInspection: PropTypes.bool,\n  }),\n  timerFocused: PropTypes.bool,\n  dispatch: PropTypes.func.isRequired,\n};\n\nMain.defaultProps = {\n  room: {\n    _id: undefined,\n    private: false,\n    accessCode: undefined,\n    event: '333',\n    users: [],\n    competing: {},\n    waitingFor: [],\n    statues: {},\n    attempts: [],\n    admin: {\n      id: undefined,\n    },\n  },\n  user: {\n    id: undefined,\n    useInspection: false,\n  },\n  timerFocused: true,\n};\n\nconst mapStateToProps = (state) => ({\n  room: state.room,\n  user: state.user,\n});\n\nexport default connect(mapStateToProps)(Main);\n","import React, { useState, useRef, useEffect } from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport FormControl from '@material-ui/core/FormControl';\nimport Input from '@material-ui/core/Input';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Icon from '@material-ui/core/Icon';\nimport NotificationImportantIcon from '@material-ui/icons/NotificationImportant';\nimport PersonIcon from '@material-ui/icons/Person';\nimport { sendChat } from '../../store/chat/actions';\n\nconst Icons = {\n  USER: <PersonIcon />,\n  ADMIN: <NotificationImportantIcon />,\n  SCRAMBLE: (event) => <Icon className={`cubing-icon event-${event}`} />,\n};\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'flex',\n    flexGrow: 1,\n    flexDirection: 'column',\n    height: '100%',\n  },\n  messages: {\n    display: 'flex',\n    flexGrow: 1,\n    flexDirection: 'column',\n    overflowY: 'auto',\n    height: 0,\n    padding: 0,\n  },\n  paper: {\n    display: 'flex',\n    flexGrow: 0,\n    width: '100%',\n    padding: '1em',\n    backgroundColor: '#fefefe',\n    borderRadius: 0,\n  },\n  message: {\n    paddingTop: 0,\n    paddingBottom: 0,\n    margin: 0,\n  },\n  systemMessage: {\n    marginTop: 0,\n    marginBottom: 0,\n  },\n  lastMessageForUser: {\n    marginBottom: '.5em',\n  },\n  selectable: {\n    '-webkit-user-select': 'text',\n    '-webkit-touch-callout': 'text',\n    '-moz-user-select': 'text',\n    '-ms-user-select': 'text',\n    'user-select': 'text',\n  },\n}));\n\nfunction Chat({\n  dispatch, messages, users, onFocus, onDefocus,\n}) {\n  const classes = useStyles();\n  const [message, setMessage] = useState('');\n  const listRef = useRef();\n  const findUser = (id) => users.find((i) => i.id === id);\n\n  const submit = () => {\n    dispatch(sendChat({\n      text: message,\n    }));\n    setMessage('');\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    submit();\n  };\n\n  const handleChange = (e) => setMessage(e.target.value);\n\n  useEffect(() => {\n    listRef.current.scrollTop = listRef.current.scrollHeight;\n  }, [messages]);\n\n  return (\n    <ClickAwayListener onClickAway={onDefocus}>\n      <Paper className={classes.root} variant=\"outlined\" square onClick={onFocus}>\n        <List className={classes.messages} ref={listRef}>\n          {messages.map(({\n            id, userId, text, secondary, icon, event,\n          }, index) => {\n            if (userId === -1) {\n              return (\n                <ListItem dense key={id} className={classes.systemMessage}>\n                  <ListItemIcon\n                    style={{ display: 'block' }}\n                  >\n                    {icon === 'SCRAMBLE' ? Icons[icon](event) : Icons[icon]}\n                  </ListItemIcon>\n\n                  <ListItemText\n                    className={classes.selectable}\n                    primary={(\n                      <Typography variant=\"body1\">\n                        {text}\n                      </Typography>\n                    )}\n                    secondary={(\n                      <Typography variant=\"body2\">\n                        {secondary}\n                      </Typography>\n                    )}\n                  />\n                </ListItem>\n              );\n            }\n\n            const user = findUser(userId);\n            const avatar = user && user.avatar.url;\n            const displayAvatar = !avatar || index === 0 || messages[index - 1].userId !== user.id;\n            const isNextMessageTheSameUser = messages[index + 1]\n              && messages[index + 1].userId === user.id;\n\n            return (\n              <ListItem\n                key={id}\n                alignItems=\"flex-start\"\n                className={clsx(classes.message, {\n                  [classes.lastMessageForUser]: !isNextMessageTheSameUser,\n                })}\n              >\n                <ListItemAvatar>\n                  {displayAvatar\n                    && <Avatar src={user.avatar.url} />}\n                </ListItemAvatar>\n\n                <ListItemText\n                  className={classes.selectable}\n                  primary={displayAvatar ? user.displayName : ''}\n                  secondary={(\n                    <Typography variant=\"body2\">\n                      {text}\n                    </Typography>\n                  )}\n                />\n              </ListItem>\n            );\n          })}\n        </List>\n        <Paper\n          component=\"form\"\n          onSubmit={handleSubmit}\n          className={classes.paper}\n          elevation={8}\n        >\n          <FormControl fullWidth>\n            <Input\n              className={classes.input}\n              fullWidth\n              placeholder=\"Send message\"\n              value={message}\n              onChange={handleChange}\n            />\n          </FormControl>\n        </Paper>\n      </Paper>\n    </ClickAwayListener>\n  );\n}\n\nChat.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.shape()),\n  users: PropTypes.arrayOf(PropTypes.shape({\n    displayName: PropTypes.string,\n    avatar: PropTypes.shape({\n      url: PropTypes.string,\n    }),\n  })),\n  dispatch: PropTypes.func.isRequired,\n  onFocus: PropTypes.func,\n  onDefocus: PropTypes.func,\n};\n\nChat.defaultProps = {\n  messages: [],\n  users: [],\n  onFocus: () => {},\n  onDefocus: () => {},\n};\n\nconst mapStateToProps = (state) => ({\n  messages: state.chat.messages,\n  users: state.chat.users,\n});\n\nexport default connect(mapStateToProps)(Chat);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport Select from '@material-ui/core/Select';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport {\n  deleteRoom,\n  requestNewScramble,\n  changeEvent,\n} from '../../store/room/actions';\nimport { Events } from '../../lib/wca';\n\nconst useStyles = makeStyles(() => ({\n  adminToolbar: {\n    flexDirection: 'row-reverse',\n    alignItems: 'stretch',\n    minHeight: '5em',\n    padding: 0,\n    flexGrow: 1,\n  },\n  changeEventSelect: {\n    paddingLeft: '.5em',\n    paddingRight: '.5em',\n  },\n}));\n\nfunction AdminToolbar({ dispatch, room }) {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const menuOpen = Boolean(anchorEl);\n\n  const canGenNewScramble = () => room && room.attempts.length\n    && Object.keys(room.attempts[room.attempts.length - 1].results).length;\n\n  const handleMenu = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleNewScramble = () => {\n    dispatch(requestNewScramble());\n  };\n\n  const handleChangeEvent = (event) => {\n    dispatch(changeEvent(event.target.value));\n  };\n\n  const handleDeleteRoom = () => {\n    dispatch(deleteRoom(room._id));\n  };\n\n  return (\n    <Toolbar className={classes.adminToolbar}>\n      <FormGroup row variant=\"text\">\n        <Button\n          disabled={!canGenNewScramble()}\n          onClick={handleNewScramble}\n        >\n          New Scramble\n        </Button>\n        <Select\n          id=\"change-event-select\"\n          className={classes.changeEventSelect}\n          value={room.event}\n          onChange={handleChangeEvent}\n          variant=\"standard\"\n        >\n          {Events.map((event) => (\n            <MenuItem key={event.id} dense value={event.id}>{event.name}</MenuItem>\n          ))}\n        </Select>\n        <Button\n          color=\"inherit\"\n          onClick={handleMenu}\n          style={{ paddingLeft: '1em' }}\n        >\n          <MoreVertIcon />\n        </Button>\n      </FormGroup>\n      <Menu\n        id=\"admin-menu\"\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n        keepMounted\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n        open={menuOpen}\n        onClose={handleClose}\n      >\n        <MenuItem onClick={handleDeleteRoom}>Delete Room</MenuItem>\n      </Menu>\n    </Toolbar>\n  );\n}\n\nAdminToolbar.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  room: PropTypes.shape({\n    _id: PropTypes.string,\n    attempts: PropTypes.array,\n    event: PropTypes.string,\n  }),\n};\n\nAdminToolbar.defaultProps = {\n  room: {\n    _id: undefined,\n    attempts: [],\n    event: undefined,\n  },\n};\n\nconst mapStateToProps = (state) => ({\n  room: state.room,\n});\n\nexport default connect(mapStateToProps)(AdminToolbar);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport Button from '@material-ui/core/Button';\nimport { updateCompeting } from '../../store/room/actions';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    alignItems: 'stretch',\n    minHeight: '5em',\n    padding: 0,\n    flexGrow: 1,\n  },\n}));\n\nfunction UserToolbar({ dispatch, room, user }) {\n  const classes = useStyles();\n  const userCompeting = room.competing[user.id];\n\n  const handleCompeting = () => {\n    dispatch(updateCompeting(!userCompeting));\n  };\n\n  return (\n    <Toolbar className={classes.root}>\n      <FormGroup row variant=\"text\">\n        <Button onClick={handleCompeting}>\n          {userCompeting ? 'Start Skipping' : 'Start Competing'}\n        </Button>\n      </FormGroup>\n    </Toolbar>\n  );\n}\n\nUserToolbar.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  room: PropTypes.shape({\n    competing: PropTypes.shape(),\n  }),\n  user: PropTypes.shape({\n    id: PropTypes.number,\n  }),\n};\n\nUserToolbar.defaultProps = {\n  room: {\n    competing: {},\n  },\n  user: {\n    id: undefined,\n  },\n};\n\nconst mapStateToProps = (state) => ({\n  room: state.room,\n  user: state.user,\n});\n\nexport default connect(mapStateToProps)(UserToolbar);\n","import React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport Divider from '@material-ui/core/Divider';\nimport ChatIcon from '@material-ui/icons/Chat';\nimport TimerIcon from '@material-ui/icons/Timer';\nimport Login from './Login';\nimport Main from './Main';\nimport Chat from './Chat';\nimport AdminToolbar from './AdminToolbar';\nimport UserToolbar from './UserToolbar';\nimport {\n  fetchRoom,\n  joinRoom,\n} from '../../store/room/actions';\n\n/*\n  GET room\n  if there is no password, POS to the room to join it and start listening with socketio\n  if there is a password:\n    Present login screen, upon submission, send a POST to the room with the password\n    If we get an error, return to / with notifcation about not being able to join room\n    If no error, start listening with socketio\n*/\n\nconst panels = [{\n  name: 'Timer',\n  icon: <TimerIcon />,\n}, {\n  name: 'Chat',\n  icon: <ChatIcon />,\n}];\n\nconst useStyles = withStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexGrow: 1,\n    flexDirection: 'column',\n    margin: 'auto',\n    width: '100%',\n    [theme.breakpoints.up('lg')]: {\n      width: '83.333333%',\n    },\n  },\n  bottomNav: {\n    width: '100%',\n    height: '4em',\n    flexGrow: 0,\n    backgroundColor: '#e6e6e6',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  bottomNavItem: {\n    display: 'flex',\n    flexGrow: 1,\n    maxWidth: '100%',\n  },\n  hiddenOnMobile: {\n    [theme.breakpoints.down('sm')]: {\n      display: 'none',\n    },\n  },\n  container: {\n    flexGrow: 1,\n  },\n  panel: {\n    flexGrow: 1,\n    transition: `display 5s ${theme.transitions.easing.easeInOut}`,\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  toolbarContainer: {\n    display: 'flex',\n    flexDirection: 'row',\n  },\n}));\n\nclass RoomNav extends React.Component {\n  constructor(props) {\n    super(props);\n    const {\n      dispatch, match, room, inRoom,\n    } = this.props;\n\n    this.state = {\n      timerFocused: true,\n      currentPanel: 0,\n    };\n\n    this.tableBodyRef = React.createRef();\n\n    if (!room._id) {\n      dispatch(fetchRoom(match.params.roomId));\n    }\n\n    if (!inRoom && room.accessCode) {\n      dispatch(joinRoom(room._id));\n    }\n  }\n\n  componentDidUpdate() {\n    const { dispatch, room, inRoom } = this.props;\n\n    // inRoom means we're not connected to a room\n    if (!inRoom && room.accessCode) {\n      dispatch(joinRoom(room._id));\n    }\n  }\n\n  onFocus() {\n    this.setState({\n      timerFocused: false,\n    });\n  }\n\n  onDefocus() {\n    this.setState({\n      timerFocused: true,\n    });\n  }\n\n  isAdmin() {\n    const { room, user } = this.props;\n    return room.admin && room.admin.id === user.id;\n  }\n\n  handleChangePanel(e, value) {\n    this.setState({\n      currentPanel: value,\n    });\n  }\n\n  render() {\n    const {\n      classes, fetching, inRoom, room,\n    } = this.props;\n\n    const { currentPanel, timerFocused } = this.state;\n\n    const loggedIn = !room.private || inRoom;\n\n    if (fetching) {\n      return (\n        <Backdrop open>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n      );\n    }\n\n    return (\n      <Paper className={classes.root}>\n        <Paper\n          className={classes.toolbarContainer}\n          square\n        >\n          <UserToolbar />\n          { this.isAdmin() && <AdminToolbar /> }\n        </Paper>\n        <Divider />\n        <Grid container direction=\"row\" className={classes.container}>\n          { !loggedIn ? <Login />\n            : (\n              <>\n                <Grid\n                  item\n                  className={clsx(classes.panel, {\n                    [classes.hiddenOnMobile]: currentPanel !== 0,\n                  })}\n                  md={8}\n                >\n                  <Main timerFocused={timerFocused} />\n                </Grid>\n                <Grid\n                  item\n                  className={clsx(classes.panel, {\n                    [classes.hiddenOnMobile]: currentPanel !== 1,\n                  })}\n                  md={4}\n                >\n                  <Chat\n                    onFocus={() => this.onFocus()}\n                    onDefocus={() => this.onDefocus()}\n                  />\n                </Grid>\n              </>\n            )}\n\n        </Grid>\n\n        <BottomNavigation\n          value={currentPanel}\n          showLabels\n          onChange={(e, v) => this.handleChangePanel(e, v)}\n          className={classes.bottomNav}\n        >\n          {panels.map((panel, index) => (\n            <BottomNavigationAction\n              key={panel.name}\n              className={classes.bottomNavItem}\n              label={panel.name}\n              value={index}\n              icon={panel.icon}\n            />\n          ))}\n        </BottomNavigation>\n      </Paper>\n    );\n  }\n}\n\nRoomNav.propTypes = {\n  fetching: PropTypes.bool,\n  room: PropTypes.shape({\n    _id: PropTypes.string,\n    private: PropTypes.bool,\n    accessCode: PropTypes.string,\n    admin: PropTypes.shape(),\n  }),\n  user: PropTypes.shape({\n    id: PropTypes.number,\n  }),\n  inRoom: PropTypes.bool,\n  dispatch: PropTypes.func.isRequired,\n  match: PropTypes.shape().isRequired,\n  classes: PropTypes.shape().isRequired,\n};\n\nRoomNav.defaultProps = {\n  fetching: true,\n  room: {\n    _id: undefined,\n    private: false,\n    accessCode: undefined,\n  },\n  user: {\n    id: undefined,\n  },\n  inRoom: false,\n};\n\nconst mapStateToProps = (state) => ({\n  fetching: state.room.fetching,\n  room: state.room,\n  inRoom: !!state.socket.room, // this tells us that we're actually in the room\n  user: state.user,\n});\n\nexport default connect(mapStateToProps)(useStyles(RoomNav));\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    width: '100%',\n    border: `1px solid ${theme.palette.divider}`,\n    transition: '2s',\n    padding: '1em',\n    justifyContent: 'space-between',\n    borderRadius: theme.borderRadius,\n    marginBottom: '1em',\n  },\n  divider: {\n    height: 28,\n    margin: 4,\n  },\n}));\n\nfunction EditableTextField({\n  label, value, onChange, validate,\n}) {\n  const classes = useStyles();\n  const [editing, setEditing] = useState(false);\n  const [_value, setValue] = useState(value);\n  const [error, setError] = useState();\n\n  const startEditing = () => {\n    setEditing(true);\n    setValue(value);\n    setError(false);\n  };\n\n  const handleChange = (event) => {\n    setValue(event.target.value);\n    setError(validate(event.target.value));\n  };\n\n  const cancel = () => {\n    setEditing(false);\n    setValue(value);\n  };\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    // TODO: username validation\n    if (_value !== value && !validate(_value)) {\n      onChange(_value, (err) => {\n        if (err) {\n          setError(err);\n        }\n      });\n    }\n    cancel();\n  };\n\n  return (\n    <ClickAwayListener\n      onClickAway={cancel}\n    >\n      <Paper component=\"form\" className={classes.root} onSubmit={onSubmit}>\n        <FormControl\n          fullWidth\n          disabled={!editing}\n          error={!!error}\n          onClick={startEditing}\n        >\n          <InputLabel style={{ width: '10em' }}>{label}</InputLabel>\n          <Input\n            value={editing ? _value : value}\n            onChange={handleChange}\n            inputRef={(r) => {\n              if (r) {\n                r.focus();\n              }\n            }}\n            margin=\"dense\"\n          />\n          <FormHelperText>{error}</FormHelperText>\n        </FormControl>\n        {!editing ? (\n          <Button\n            variant=\"text\"\n            onClick={startEditing}\n            color=\"primary\"\n            style={{\n              marginLeft: 'auto',\n              marginRight: 0,\n              order: 2,\n            }}\n          >\n            Change\n          </Button>\n        ) : (\n          <ButtonGroup>\n            <Button variant=\"text\" onClick={onSubmit} color=\"primary\" disabled={value === _value}>Change</Button>\n            <Button variant=\"text\" onClick={cancel}>Cancel</Button>\n          </ButtonGroup>\n        )}\n      </Paper>\n    </ClickAwayListener>\n  );\n}\n\nEditableTextField.propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  validate: PropTypes.func.isRequired,\n};\n\nEditableTextField.defaultProps = {\n  value: undefined,\n};\n\nexport default EditableTextField;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Divider from '@material-ui/core/Divider';\nimport Alert from '@material-ui/lab/Alert';\nimport EditableTextField from './EditableTextField';\nimport { updateProfile } from '../store/user/actions';\n\nconst validate = (username) => {\n  if (!username) {\n    return '';\n  }\n\n  if (username.indexOf(' ') > -1) {\n    return 'Username cannot contains spaces';\n  }\n\n  if (username.length >= 16) {\n    return 'Username cannot be longer than 16 characters';\n  }\n\n  return '';\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    padding: '1em',\n  },\n  avatar: {\n    width: '10em',\n    height: '10em',\n    boxShadow: theme.shadows[1],\n  },\n  avatarContainer: {\n    display: 'flex',\n    flexGrow: 1,\n    flexDirection: 'row-reverse',\n  },\n  preferences: {\n    padding: '1em',\n  },\n  input: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%',\n    border: `1px solid ${theme.palette.divider}`,\n    transition: '2s',\n    padding: '1em',\n    borderRadius: theme.borderRadius,\n    marginBottom: '1em',\n  },\n  separate: {\n    marginTop: '.5em',\n    marginBottom: '.5em',\n  },\n  indent: {\n    marginLeft: '1em',\n  },\n}));\n\nfunction Profile({ user, dispatch }) {\n  const classes = useStyles();\n\n  const changeUsername = (username, cb) => {\n    fetch('/api/updateUsername', {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      method: 'PUT',\n      body: JSON.stringify({\n        username,\n      }),\n    }).then((res) => {\n      if (!res.ok) {\n        throw res;\n      }\n\n      return res.json();\n    }).then((res) => {\n      dispatch(updateProfile({\n        username: res.username,\n        displayName: res.displayName,\n        canJoinRoom: res.canJoinRoom,\n      }));\n      cb();\n    }).catch((err) => {\n      err.json().then((e) => {\n        cb(e.message);\n      });\n    });\n  };\n\n  const handleToggle = (event) => {\n    const { name, checked } = event.target;\n    fetch('/api/updatePreference', {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      method: 'PUT',\n      body: JSON.stringify({\n        [name]: checked,\n      }),\n    }).then((res) => res.json()).then((res) => {\n      dispatch(updateProfile({\n        [name]: res[name],\n        displayName: res.displayName,\n        canJoinRoom: res.canJoinRoom,\n      }));\n    });\n  };\n\n  return !user.id ? (\n    <div />\n  ) : (\n    <Grid container justify=\"center\" className={classes.root}>\n      <Grid item xs={12} md={8}>\n        {!user.canJoinRoom && (\n          <Alert\n            severity=\"error\"\n            style={{ fontSize: '1.25em' }}\n          >\n            Must set a username or check `Prefer Real Name` before joining a room.\n          </Alert>\n        )}\n        <Paper>\n          <Grid container style={{ padding: '2em', justifyContent: 'space-between' }}>\n            <Grid item xs={4}>\n              <div>\n                <Typography component=\"span\" variant=\"body1\">\n                  Displaying as:\n                </Typography>\n                {user.displayName ? (\n                  <Typography component=\"span\" variant=\"subtitle2\" className={classes.indent}>\n                    {user.displayName}\n                  </Typography>\n                ) : (\n                  <Typography component=\"span\" variant=\"subtitle2\" className={classes.indent}>\n                    NO NAME SET\n                  </Typography>\n\n                )}\n              </div>\n\n              <Divider className={classes.separate} />\n\n              <div className={classes.separate}>\n                <Typography component=\"span\" variant=\"body1\">\n                  Real name (\n                  {user.showWCAID ? 'Visible' : 'Hidden'}\n                  ):\n                </Typography>\n                <Typography component=\"span\" variant=\"subtitle2\" className={classes.indent}>\n                  {user.name}\n                </Typography>\n              </div>\n\n              <div className={classes.separate}>\n                <Typography component=\"span\" variant=\"body1\">\n                  WCA ID (\n                  {user.showWCAID ? 'Visible' : 'Hidden'}\n                  ):\n                </Typography>\n                <Typography component=\"span\" variant=\"subtitle2\" className={classes.indent}>\n                  {user.wcaId}\n                </Typography>\n              </div>\n            </Grid>\n            <Grid item lg={2} className={classes.avatarContainer}>\n              <Avatar variant=\"square\" className={classes.avatar} src={user.avatar.url} />\n            </Grid>\n          </Grid>\n\n          <Grid container className={classes.preferences}>\n            <EditableTextField\n              label=\"Username\"\n              value={user.username}\n              onChange={changeUsername}\n              validate={validate}\n            />\n            <Paper className={classes.input}>\n              <FormControlLabel\n                control={(\n                  <Checkbox\n                    checked={user.preferRealName}\n                    onChange={handleToggle}\n                    name=\"preferRealName\"\n                  />\n                )}\n                label=\"Prefer Real Name\"\n              />\n              <FormControlLabel\n                control={(\n                  <Checkbox\n                    checked={user.showWCAID}\n                    onChange={handleToggle}\n                    name=\"showWCAID\"\n                  />\n                )}\n                label=\"Show WCA Identity\"\n              />\n              <FormControlLabel\n                control={(\n                  <Checkbox\n                    checked={user.useInspection}\n                    onChange={handleToggle}\n                    name=\"useInspection\"\n                  />\n                )}\n                label=\"Use inspection\"\n              />\n              <p>All preferences get saved automatically.</p>\n            </Paper>\n          </Grid>\n        </Paper>\n      </Grid>\n    </Grid>\n  );\n}\n\nProfile.propTypes = {\n  user: PropTypes.shape({\n    id: PropTypes.number,\n    displayName: PropTypes.string,\n    name: PropTypes.string,\n    username: PropTypes.string,\n    preferRealName: PropTypes.bool,\n    showWCAID: PropTypes.bool,\n    canJoinRoom: PropTypes.bool,\n    wcaId: PropTypes.string,\n    useInspection: PropTypes.bool,\n    avatar: PropTypes.shape({\n      url: PropTypes.string,\n    }),\n  }),\n  dispatch: PropTypes.func.isRequired,\n};\n\nProfile.defaultProps = {\n  user: {\n    id: undefined,\n    displayName: undefined,\n    name: '',\n    username: '',\n    preferRealName: false,\n    showWCAID: false,\n    canJoinRoom: false,\n    wcaId: '',\n    useInspection: false,\n    avatar: {\n      url: undefined,\n    },\n  },\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n});\n\nexport default connect(mapStateToProps)(Profile);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Alert from '@material-ui/lab/Alert';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Header from './Header';\nimport RoomList from './RoomList';\nimport Room from './Room/index';\nimport Profile from './Profile';\nimport { closeMessage } from '../store/messages/actions';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    height: '100vh',\n    flexDirection: 'column',\n    '-webkit-user-select': 'none',\n    '-webkit-touch-callout': 'none',\n    '-moz-user-select': 'none',\n    '-ms-user-select': 'none',\n    'user-select': 'none',\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  backdropContainer: {\n    textAlign: 'center',\n    verticalAlign: 'middle',\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n}));\n\nfunction App({\n  dispatch, connected, user, room, messages,\n}) {\n  const classes = useStyles();\n\n  const handleClose = (index, event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    dispatch(closeMessage(index));\n  };\n\n  return (\n    <div className={classes.root}>\n      <Backdrop className={classes.backdrop} open={!connected}>\n        <CircularProgress color=\"inherit\" />\n        <Snackbar open anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}>\n          <Alert severity=\"error\">\n            Disconnected from server.\n          </Alert>\n        </Snackbar>\n      </Backdrop>\n\n      <Header user={user} room={room}>\n        <Switch>\n          <Route exact path=\"/\" component={RoomList} />\n          { (!user.id || user.canJoinRoom) && <Route path=\"/rooms/:roomId\" component={Room} /> }\n          { (user.id || user.fetching)\n            && (<Route exact path=\"/profile\" component={Profile} user={user} />)}\n          <Redirect to=\"/\" />\n        </Switch>\n      </Header>\n\n      {messages[0] ? (\n        <Snackbar\n          open={!!messages[0]}\n          autoHideDuration={6000}\n          onClose={(event, reason) => handleClose(0, event, reason)}\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n        >\n          <Alert\n            onClose={(event, reason) => handleClose(0, event, reason)}\n            severity={messages[0].severity}\n          >\n            {messages[0].text}\n          </Alert>\n        </Snackbar>\n      )\n        : ''}\n    </div>\n  );\n}\n\nApp.propTypes = {\n  connected: PropTypes.bool,\n  user: PropTypes.shape().isRequired,\n  room: PropTypes.shape().isRequired,\n  messages: PropTypes.arrayOf(PropTypes.shape({\n    severity: PropTypes.string,\n    text: PropTypes.string,\n  })),\n  dispatch: PropTypes.func.isRequired,\n};\n\nApp.defaultProps = {\n  connected: false,\n  messages: [],\n};\n\nconst mapStateToProps = (state) => ({\n  connected: state.socket.connected,\n  room: state.room,\n  user: state.user,\n  // messages: state.messages.messages,\n});\n\nexport default connect(mapStateToProps)(App);\n","import React from 'react';\nimport { AppContainer } from 'react-hot-loader';\nimport { Provider } from 'react-redux';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport theme from '../theme';\nimport { store, history } from '../store';\nimport Navigation from './Navigation';\n\nfunction App() {\n  return (\n    <AppContainer>\n      <Provider store={store}>\n        <ConnectedRouter history={history} noInitialPop>\n          <ThemeProvider theme={theme}>\n            <CssBaseline />\n            <Navigation />\n          </ThemeProvider>\n        </ConnectedRouter>\n      </Provider>\n    </AppContainer>\n  );\n}\n\nexport default App;\n","/* eslint-disable */\nimport { Workbox } from \"workbox-window\";\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost'\n    // [::1] is the IPv6 localhost address.\n    || window.location.hostname === '[::1]'\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    || window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/custom-service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service '\n              + 'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  const wb = new Workbox('/custom-service-worker.js');\n\n  wb.register();\n  // navigator.serviceWorker\n  //   .register(swUrl)\n  //   .then((registration) => {\n  //     registration.onupdatefound = () => {\n  //       const installingWorker = registration.installing;\n  //       if (installingWorker == null) {\n  //         return;\n  //       }\n  //       installingWorker.onstatechange = () => {\n  //         if (installingWorker.state === 'installed') {\n  //           if (navigator.serviceWorker.controller) {\n  //             // At this point, the updated precached content has been fetched,\n  //             // but the previous service worker will still serve the older\n  //             // content until all client tabs are closed.\n  //             console.log(\n  //               'New content is available and will be used when all '\n  //                 + 'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n  //             );\n\n  //             // Execute callback\n  //             if (config && config.onUpdate) {\n  //               config.onUpdate(registration);\n  //             }\n  //           } else {\n  //             // At this point, everything has been precached.\n  //             // It's the perfect time to display a\n  //             // \"Content is cached for offline use.\" message.\n  //             console.log('Content is cached for offline use.');\n\n  //             // Execute callback\n  //             if (config && config.onSuccess) {\n  //               config.onSuccess(registration);\n  //             }\n  //           }\n  //         }\n  //       };\n  //     };\n  //   })\n  //   .catch((error) => {\n  //     console.error('Error during service worker registration:', error);\n  //   });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404\n        || (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/index.css';\nimport App from './components/App';\nimport * as serviceWorker from './registerServiceWorker';\nimport { store } from './store';\nimport { connectSocket } from './store/socket/actions';\nimport { fetchUser } from './store/user/actions';\n\nstore.dispatch(connectSocket());\nstore.dispatch(fetchUser());\n\nconst render = () => {\n  /* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */\n  ReactDOM.render(\n    <App />,\n    document.querySelector('#root'),\n  );\n};\n\nrender();\n\nif (module.hot) {\n  module.hot.accept('./components/App', () => {\n    render();\n  });\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","// socket.io event names\nmodule.exports = {\n  MESSAGE: 'message',\n  CONNECT: 'connect',\n  DISCONNECT: 'disconnect',\n  CONNECT_ERR: 'connect_error',\n  RECONNECT_ERR: 'reconnect_error',\n  RECONNECT: 'reconnect',\n  ERROR: 'errorrr',\n  UPDATE_ROOMS: 'update_rooms',\n  UPDATE_ROOM: 'update_room',\n  GLOBAL_ROOM_UPDATED: 'global_room_updated',\n  CREATE_ROOM: 'create_room',\n  DELETE_ROOM: 'delete_room',\n  ROOM_CREATED: 'room_created',\n  ROOM_DELETED: 'room_deleted',\n  UPDATE_ADMIN: 'update_admin',\n  FORCE_JOIN: 'force_join',\n  FETCH_ROOM: 'fetch_room',\n  JOIN_ROOM: 'join_room',\n  LEAVE_ROOM: 'leave_room',\n  JOIN: 'join',\n  USER_JOIN: 'user_join',\n  USER_LEFT: 'user_left',\n  SUBMIT_RESULT: 'submit_result',\n  NEW_RESULT: 'new_result',\n  NEW_ATTEMPT: 'new_attempt',\n  REQUEST_SCRAMBLE: 'request_scramble',\n  CHANGE_EVENT: 'change_event',\n  UPDATE_PREFERENCES: 'update_preferences',\n  UPDATE_STATUS: 'update_status',\n  UPDATE_COMPETING: 'update_competing',\n};\n"],"sourceRoot":""}